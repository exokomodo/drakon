<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README-highdpi</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>
  <style type="text/css">:root {
color-scheme: dark light; 
}
body {
background-color: white;
padding: 2vw;
color: #333;
max-width: 1200px;
margin: 0 auto;
font-size: 16px;
line-height: 1.5;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans",
Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
overflow-wrap: break-word;
}
a {
color: #0969da;

}
a:visited {
color: #064998;
}
h1 {
border-bottom: 2px solid #efefef;
}
h2 {
border-bottom: 1px solid #efefef;
}
p {
max-width: 85ch;
}
li {
max-width: 85ch;
}
div.sourceCode {
background-color: #f6f8fa;
max-width: 100%;
padding: 16px;
}
code {
background-color: #f6f8fa;
padding: 0px;
font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
"Liberation Mono", monospace;
}
table {
border: 1px solid #808080;
border-collapse: collapse;
}
td {
border: 1px solid #808080;
padding: 5px;
}
tr:nth-child(even) {
background-color: #f6f8fa;
}
.wikitopbanner {
display: flex;
justify-content: space-between;
align-items: center;
background-color: #efefef;
padding: 10px;
margin-bottom: 10px;
width: auto;
}
.wikibottombanner {
background-color: #efefef;
padding: 10px;
margin-top: 10px;
width: auto;
}
.alertBox {
background-color: #f8d7da;
border: 1px solid #f5c6cb;
max-width: 60%;
padding: 10;
margin: auto;
}
.anchorImage {
visibility: hidden;
padding-left: 0.2em;
color: #fff;
}
.anchorText:hover .anchorImage {
visibility: visible;
}
hr {
display: block;
height: 1px;
border: 0;
border-top: 1px solid #efefef;
margin: 1em 0;
padding: 0;
}

@media (prefers-color-scheme: dark) {
body {
color: #e6edf3;
background-color: #0d1117;
}
h1 {
border-color: rgba(48, 54, 61, 0.7);
}
h2 {
border-color: rgba(48, 54, 61, 0.7);
}
hr {
border-color: rgba(48, 54, 61, 0.7);
}
div.sourceCode {
background-color: #161b22;
}
code {
background-color: #161b22;
}
a {
color: #4493f8;
}
a:visited {
color: #2f66ad;
}
table {
border-color: rgba(48, 54, 61, 0.7);
}
td {
border-color: rgba(48, 54, 61, 0.7);
}
tr:nth-child(even) {
background-color: #161b22;
}
.wikitopbanner {
background-color: #263040;
}
.wikibottombanner {
background-color: #263040;
}
.anchorText:hover .anchorImage {
filter: invert(100%);
}
}
@media print {
body {
font-size: 12px;
}
table {
font-size: inherit;
}
a:visited {
color: #0969da;
}
.wikitopbanner,
.anchorText,
.wikibottombanner {
display: none;
}
}
</style>
  <style type="text/css"> code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
{ position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
{ content: attr(title);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; pointer-events: all; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
@media (prefers-color-scheme: dark) {
code span.al { color: #95da4c; font-weight: bold; } 
code span.an { color: #3f8058; } 
code span.at { color: #2980b9; } 
code span.bn { color: #f67400; } 
code span.bu { color: #7f8c8d; } 
code span.ch { color: #3daee9; } 
code span.co { color: #7a7c7d; } 
code span.cv { color: #7f8c8d; } 
code span.cn { color: #27aeae; font-weight: bold; } 
code span.cf { color: #fdbc4b; font-weight: bold; } 
code span.dt { color: #2980b9; } 
code span.dv { color: #f67400; } 
code span.do { color: #a43340; } 
code span.er { color: #da4453; } 
code span.ex { color: #0099ff; font-weight: bold; } 
code span.fl { color: #f67400; } 
code span.fu { color: #8e44ad; } 
code span.im { color: #27ae60; } 
code span.in { color: #c45b00; } 
code span.kw { color: #cfcfc2; font-weight: bold; } 
code span.op { color: #cfcfc2; } 
code span.ot { color: #27ae60; } 
code span.pp { color: #27ae60; } 
code span.sc { color: #3daee9; } 
code span.ss { color: #da4453; } 
code span.st { color: #f44f4f; } 
code span.va { color: #27aeae; } 
code span.vs { color: #da4453; } 
code span.wa { color: #da4453; } 
}</style>
</head>
<body>
<p>SDL 3.0 has new support for high DPI displays. Interfaces provided by
SDL uses the platform&#39;s native coordinates unless otherwise
specified.</p>
<h2 id="explanation">Explanation</h2>
<p>Displays now have a content display scale, which is the expected
scale for content based on the DPI settings of the display. For example,
a 4K display might have a 2.0 (200%) display scale, which means that the
user expects UI elements to be twice as big on this display, to aid in
readability. You can query the display content scale using
<code>SDL_GetDisplayContentScale()</code>, and when this changes you get
an <code>SDL_EVENT_WINDOW_DISPLAY_SCALE_CHANGED</code> event.</p>
<p>The window size is now distinct from the window pixel size, and the
ratio between the two is the window pixel density. If the window is
created with the <code>SDL_WINDOW_HIGH_PIXEL_DENSITY</code> flag, SDL
will try to match the native pixel density for the display, otherwise it
will try to have the pixel size match the window size. You can query the
window pixel density using <code>SDL_GetWindowPixelDensity()</code>. You
can query the window pixel size using
<code>SDL_GetWindowSizeInPixels()</code>, and when this changes you get
an <code>SDL_EVENT_WINDOW_PIXEL_SIZE_CHANGED</code> event. You are
guaranteed to get a <code>SDL_EVENT_WINDOW_PIXEL_SIZE_CHANGED</code>
event when a window is created and resized, and you can use this event
to create and resize your graphics context for the window.</p>
<p>The window has a display scale, which is the scale from the pixel
resolution to the desired content size, e.g. the combination of the
pixel density and the content scale. For example, a 3840x2160 window
displayed at 200% on Windows, and a 1920x1080 window with the high
density flag on a 2x display on macOS will both have a pixel size of
3840x2160 and a display scale of 2.0. You can query the window display
scale using <code>SDL_GetWindowDisplayScale()</code>, and when this
changes you get an <code>SDL_EVENT_WINDOW_DISPLAY_SCALE_CHANGED</code>
event.</p>
<h2 id="numeric-example">Numeric example</h2>
<p>Given a window spanning a 3840x2160 monitor set to 2x display or 200%
scaling, the following tabulates the effect of creating a window with or
without <code>SDL_WINDOW_HIGH_PIXEL_DENSITY</code> on macOS and
Windows:</p>
<table>
<thead>
<tr class="header">
<th>Value</th>
<th>macOS (Default)</th>
<th>macOS (HD)</th>
<th>Windows (Default &amp; HD)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SDL_GetWindowSize()</code></td>
<td>1920x1080</td>
<td>1920x1080</td>
<td>3840x2160</td>
</tr>
<tr class="even">
<td><code>SDL_GetWindowSizeInPixels()</code></td>
<td>1920x1080</td>
<td>3840x2160</td>
<td>3840x2160</td>
</tr>
<tr class="odd">
<td><code>SDL_GetDisplayContentScale()</code></td>
<td>1.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td><code>SDL_GetWindowDisplayScale()</code></td>
<td>1.0</td>
<td>2.0</td>
<td>2.0</td>
</tr>
<tr class="odd">
<td><code>SDL_GetWindowPixelDensity()</code></td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>
<p>Observe the difference between the approaches taken by macOS and
Windows:</p>
<ul>
<li>The Windows and Android coordinate system always deals in physical
device pixels, high DPI support is achieved by providing a content scale
that tells the developer to draw objects larger. Ignoring this scale
factor results in graphics appearing tiny.</li>
<li>The macOS and iOS coordinate system always deals in window
coordinates, high DPI support is achieved by providing an optional flag
for the developer to request more pixels. Omitting this flag results in
graphics having low detail.</li>
<li>On Linux, X11 uses a similar approach to Windows and Wayland uses a
similar approach to macOS.</li>
</ul>
<h2 id="solution">Solution</h2>
<p>Proper high DPI support takes into account both the content scale and
the pixel density.</p>
<p>First, you&#39;d create your window with the
<code>SDL_WINDOW_HIGH_PIXEL_DENSITY</code> flag, assuming you want the
highest detail possible. Then you&#39;d get the window display scale to see
how much your UI elements should be enlarged to be readable.</p>
<p>If you&#39;re using the SDL 2D renderer, SDL provides the function
<code>SDL_ConvertEventToRenderCoordinates()</code> to convert mouse
coordinates between window coordinates and rendering coordinates, and
the more general functions
<code>SDL_RenderCoordinatesFromWindow()</code> and
<code>SDL_RenderCoordinatesToWindow()</code> to do other conversion
between them.</p>
<p>If you&#39;re not using the 2D renderer, you can implement this yourself
using <code>SDL_GetWindowPixelDensity()</code> as scale factor to
convert from window coordinates to pixels.</p>
<p>Finally you&#39;ll want to test on both Windows and macOS if possible to
make sure your high DPI support works in all environments.</p>
</body>
</html>
