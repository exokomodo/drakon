<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README-migration</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <style type="text/css">:root {
color-scheme: dark light; 
}
body {
background-color: white;
padding: 2vw;
color: #333;
max-width: 1200px;
margin: 0 auto;
font-size: 16px;
line-height: 1.5;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans",
Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
overflow-wrap: break-word;
}
a {
color: #0969da;

}
a:visited {
color: #064998;
}
h1 {
border-bottom: 2px solid #efefef;
}
h2 {
border-bottom: 1px solid #efefef;
}
p {
max-width: 85ch;
}
li {
max-width: 85ch;
}
div.sourceCode {
background-color: #f6f8fa;
max-width: 100%;
padding: 16px;
}
code {
background-color: #f6f8fa;
padding: 0px;
font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
"Liberation Mono", monospace;
}
table {
border: 1px solid #808080;
border-collapse: collapse;
}
td {
border: 1px solid #808080;
padding: 5px;
}
tr:nth-child(even) {
background-color: #f6f8fa;
}
.wikitopbanner {
display: flex;
justify-content: space-between;
align-items: center;
background-color: #efefef;
padding: 10px;
margin-bottom: 10px;
width: auto;
}
.wikibottombanner {
background-color: #efefef;
padding: 10px;
margin-top: 10px;
width: auto;
}
.alertBox {
background-color: #f8d7da;
border: 1px solid #f5c6cb;
max-width: 60%;
padding: 10;
margin: auto;
}
.anchorImage {
visibility: hidden;
padding-left: 0.2em;
color: #fff;
}
.anchorText:hover .anchorImage {
visibility: visible;
}
hr {
display: block;
height: 1px;
border: 0;
border-top: 1px solid #efefef;
margin: 1em 0;
padding: 0;
}

@media (prefers-color-scheme: dark) {
body {
color: #e6edf3;
background-color: #0d1117;
}
h1 {
border-color: rgba(48, 54, 61, 0.7);
}
h2 {
border-color: rgba(48, 54, 61, 0.7);
}
hr {
border-color: rgba(48, 54, 61, 0.7);
}
div.sourceCode {
background-color: #161b22;
}
code {
background-color: #161b22;
}
a {
color: #4493f8;
}
a:visited {
color: #2f66ad;
}
table {
border-color: rgba(48, 54, 61, 0.7);
}
td {
border-color: rgba(48, 54, 61, 0.7);
}
tr:nth-child(even) {
background-color: #161b22;
}
.wikitopbanner {
background-color: #263040;
}
.wikibottombanner {
background-color: #263040;
}
.anchorText:hover .anchorImage {
filter: invert(100%);
}
}
@media print {
body {
font-size: 12px;
}
table {
font-size: inherit;
}
a:visited {
color: #0969da;
}
.wikitopbanner,
.anchorText,
.wikibottombanner {
display: none;
}
}
</style>
  <style type="text/css"> code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
{ position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
{ content: attr(title);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; pointer-events: all; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
@media (prefers-color-scheme: dark) {
code span.al { color: #95da4c; font-weight: bold; } 
code span.an { color: #3f8058; } 
code span.at { color: #2980b9; } 
code span.bn { color: #f67400; } 
code span.bu { color: #7f8c8d; } 
code span.ch { color: #3daee9; } 
code span.co { color: #7a7c7d; } 
code span.cv { color: #7f8c8d; } 
code span.cn { color: #27aeae; font-weight: bold; } 
code span.cf { color: #fdbc4b; font-weight: bold; } 
code span.dt { color: #2980b9; } 
code span.dv { color: #f67400; } 
code span.do { color: #a43340; } 
code span.er { color: #da4453; } 
code span.ex { color: #0099ff; font-weight: bold; } 
code span.fl { color: #f67400; } 
code span.fu { color: #8e44ad; } 
code span.im { color: #27ae60; } 
code span.in { color: #c45b00; } 
code span.kw { color: #cfcfc2; font-weight: bold; } 
code span.op { color: #cfcfc2; } 
code span.ot { color: #27ae60; } 
code span.pp { color: #27ae60; } 
code span.sc { color: #3daee9; } 
code span.ss { color: #da4453; } 
code span.st { color: #f44f4f; } 
code span.va { color: #27aeae; } 
code span.vs { color: #da4453; } 
code span.wa { color: #da4453; } 
}</style>
</head>
<body>
<h1 id="migrating-to-sdl-30">Migrating to SDL 3.0</h1>
<p>This guide provides useful information for migrating applications
from SDL 2.0 to SDL 3.0.</p>
<p>Details on API changes are organized by SDL 2.0 header below.</p>
<p>The file with your main() function should include
&lt;SDL3/SDL_main.h&gt;, as that is no longer included in SDL.h.</p>
<p>Functions that previously returned a negative error code now return
bool.</p>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_Function<span class="op">()</span> <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">||</span> SDL_Function<span class="op">()</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Failure... */</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_Function<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Success... */</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>SDL_Function<span class="op">())</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Success... */</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_Function<span class="op">())</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Success... */</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Failure... */</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>This only applies to camel case functions, e.g.
<code>SDL_[A-Z]*</code>. Lower case functions like SDL_strcmp() and
SDL_memcmp() are unchanged, matching their C runtime counterpart.</p>
<p>Many functions and symbols have been renamed. We have provided a
handy Python script <a href="https://github.com/libsdl-org/SDL/blob/main/build-scripts/rename_symbols.py">rename_symbols.py</a>
to rename SDL2 functions to their SDL3 counterparts:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rename_symbols.py</span> <span class="at">--all-symbols</span> source_code_path</span></code></pre></div>
<p>It&#39;s also possible to apply a semantic patch to migrate more easily
to SDL3: <a href="https://github.com/libsdl-org/SDL/blob/main/build-scripts/SDL_migration.cocci">SDL_migration.cocci</a></p>
<p>SDL headers should now be included as
<code>#include &lt;SDL3/SDL.h&gt;</code>. Typically that&#39;s the only SDL
header you&#39;ll need in your application unless you are using OpenGL or
Vulkan functionality. SDL_image, SDL_mixer, SDL_net, SDL_ttf and SDL_rtf
have also their preferred include path changed: for SDL_image, it
becomes <code>#include &lt;SDL3_image/SDL_image.h&gt;</code>. We have
provided a handy Python script <a href="https://github.com/libsdl-org/SDL/blob/main/build-scripts/rename_headers.py">rename_headers.py</a>
to rename SDL2 headers to their SDL3 counterparts:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rename_headers.py</span> source_code_path</span></code></pre></div>
<p>Some macros are renamed and/or removed in SDL3. We have provided a
handy Python script <a href="https://github.com/libsdl-org/SDL/blob/main/build-scripts/rename_macros.py">rename_macros.py</a>
to replace these, and also add fixme comments on how to further improve
the code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rename_macros.py</span> source_code_path</span></code></pre></div>
<p>CMake users should use this snippet to include SDL support in their
project:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">find_package</span>(SDL3 <span class="ot">REQUIRED</span> <span class="ot">CONFIG</span> <span class="ot">REQUIRED</span> <span class="ot">COMPONENTS</span> SDL3)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">mygame</span> <span class="ot">PRIVATE</span> <span class="bn">SDL3::SDL3</span>)</span></code></pre></div>
<p>Autotools users should use this snippet to include SDL support in
their project:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode m4"><code class="sourceCode m4"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>PKG_CHECK_MODULES<span class="ch">(</span>[SDL3]<span class="ch">,</span> [sdl3]<span class="ch">)</span></span></code></pre></div>
<p>and then add <code>$SDL3_CFLAGS</code> to their project
<code>CFLAGS</code> and <code>$SDL3_LIBS</code> to their project
<code>LDFLAGS</code>.</p>
<p>Makefile users can use this snippet to include SDL support in their
project:</p>
<pre class="make"><code>CFLAGS += $(shell pkg-config sdl3 --cflags)
LDFLAGS += $(shell pkg-config sdl3 --libs)</code></pre>
<p>The SDL3test library has been renamed SDL3_test.</p>
<p>The SDLmain library has been removed, it&#39;s been entirely replaced by
SDL_main.h.</p>
<p>The vi format comments have been removed from source code. Vim users
can use the <a href="https://github.com/editorconfig/editorconfig-vim">editorconfig
plugin</a> to automatically set tab spacing for the SDL coding
style.</p>
<p>Installed SDL CMake configuration files no longer define
<code>SDL3_PREFIX</code>, <code>SDL3_EXEC_PREFIX</code>,
<code>SDL3_INCLUDE_DIR</code>, <code>SDL3_INCLUDE_DIRS</code>,
<code>SDL3_BINDIR</code> or <code>SDL3_LIBDIR</code>. Users are expected
to use <a href="https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html#target-dependent-expressions">CMake
generator expressions</a> with <code>SDL3::SDL3</code>,
<code>SDL3::SDL3-shared</code>, <code>SDL3::SDL3-static</code> or
<code>SDL3::Headers</code>. By no longer defining these CMake variables,
using a system SDL3 or using a vendoring SDL3 behave in the same
way.</p>
<h2 id="sdl_atomich">SDL_atomic.h</h2>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_atomic_t =&gt; SDL_AtomicInt</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_AtomicAdd() =&gt; SDL_AddAtomicInt()</li>
<li>SDL_AtomicCAS() =&gt; SDL_CompareAndSwapAtomicInt()</li>
<li>SDL_AtomicCASPtr() =&gt; SDL_CompareAndSwapAtomicPointer()</li>
<li>SDL_AtomicGet() =&gt; SDL_GetAtomicInt()</li>
<li>SDL_AtomicGetPtr() =&gt; SDL_GetAtomicPointer()</li>
<li>SDL_AtomicLock() =&gt; SDL_LockSpinlock()</li>
<li>SDL_AtomicSet() =&gt; SDL_SetAtomicInt()</li>
<li>SDL_AtomicSetPtr() =&gt; SDL_SetAtomicPointer()</li>
<li>SDL_AtomicTryLock() =&gt; SDL_TryLockSpinlock()</li>
<li>SDL_AtomicUnlock() =&gt; SDL_UnlockSpinlock()</li>
</ul>
<h2 id="sdl_audioh">SDL_audio.h</h2>
<p>The audio subsystem in SDL3 is dramatically different than SDL2. The
primary way to play audio is no longer an audio callback; instead you
bind SDL_AudioStreams to devices; however, there is still a callback
method available if needed.</p>
<p>The SDL 1.2 audio compatibility API has also been removed, as it was
a simplified version of the audio callback interface.</p>
<p>SDL3 will not implicitly initialize the audio subsystem on your
behalf if you open a device without doing so. Please explicitly call
SDL_Init(SDL_INIT_AUDIO) at some point.</p>
<p>SDL2 referred to audio devices that record sound as &quot;capture&quot;
devices, and ones that play sound to speakers as &quot;output&quot; devices. In
SDL3, we&#39;ve changed this terminology to be &quot;recording&quot; devices and
&quot;playback&quot; devices, which we hope is more clear.</p>
<p>SDL3&#39;s audio subsystem offers an enormous amount of power over SDL2,
but if you just want a simple migration of your existing code, you can
ignore most of it. The simplest migration path from SDL2 looks something
like this:</p>
<p>In SDL2, you might have done something like this to play audio...</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> SDLCALL MyAudioCallback<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> Uint8 <span class="op">*</span> stream<span class="op">,</span> <span class="dt">int</span> len<span class="op">)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Calculate a little more audio here, maybe using `userdata`, write it to `stream` */</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ...somewhere near startup... */</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    SDL_AudioSpec my_desired_audio_format<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    SDL_zero<span class="op">(</span>my_desired_audio_format<span class="op">);</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>format <span class="op">=</span> AUDIO_S16<span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>channels <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>freq <span class="op">=</span> <span class="dv">44100</span><span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>samples <span class="op">=</span> <span class="dv">1024</span><span class="op">;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>callback <span class="op">=</span> MyAudioCallback<span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    my_desired_audio_format<span class="op">.</span>userdata <span class="op">=</span> <span class="op">&amp;</span>my_audio_callback_user_data<span class="op">;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    SDL_AudioDeviceID my_audio_device <span class="op">=</span> SDL_OpenAudioDevice<span class="op">(</span>NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="op">&amp;</span>my_desired_audio_format<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    SDL_PauseAudioDevice<span class="op">(</span>my_audio_device<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span></code></pre></div>
<p>...in SDL3, you can do this...</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> SDLCALL MyNewAudioCallback<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> SDL_AudioStream <span class="op">*</span>stream<span class="op">,</span> <span class="dt">int</span> additional_amount<span class="op">,</span> <span class="dt">int</span> total_amount<span class="op">)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* Calculate a little more audio here, maybe using `userdata`, write it to `stream`</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">         *</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">         * If you want to use the original callback, you could do something like this:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">         */</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>additional_amount <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            Uint8 <span class="op">*</span>data <span class="op">=</span> SDL_stack_alloc<span class="op">(</span>Uint8<span class="op">,</span> additional_amount<span class="op">);</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                MyAudioCallback<span class="op">(</span>userdata<span class="op">,</span> data<span class="op">,</span> additional_amount<span class="op">);</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                SDL_PutAudioStreamData<span class="op">(</span>stream<span class="op">,</span> data<span class="op">,</span> additional_amount<span class="op">);</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                SDL_stack_free<span class="op">(</span>data<span class="op">);</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ...somewhere near startup... */</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> SDL_AudioSpec spec <span class="op">=</span> <span class="op">{</span> SDL_AUDIO_S16<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">44100</span> <span class="op">};</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    SDL_AudioStream <span class="op">*</span>stream <span class="op">=</span> SDL_OpenAudioDeviceStream<span class="op">(</span>SDL_AUDIO_DEVICE_DEFAULT_PLAYBACK<span class="op">,</span> <span class="op">&amp;</span>spec<span class="op">,</span> MyNewAudioCallback<span class="op">,</span> <span class="op">&amp;</span>my_audio_callback_user_data<span class="op">);</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    SDL_ResumeAudioDevice<span class="op">(</span>SDL_GetAudioStreamDevice<span class="op">(</span>stream<span class="op">));</span></span></code></pre></div>
<p>If you used SDL_QueueAudio instead of a callback in SDL2, this is
also straightforward.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ...somewhere near startup... */</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> SDL_AudioSpec spec <span class="op">=</span> <span class="op">{</span> SDL_AUDIO_S16<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">44100</span> <span class="op">};</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    SDL_AudioStream <span class="op">*</span>stream <span class="op">=</span> SDL_OpenAudioDeviceStream<span class="op">(</span>SDL_AUDIO_DEVICE_DEFAULT_PLAYBACK<span class="op">,</span> <span class="op">&amp;</span>spec<span class="op">,</span> NULL<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    SDL_ResumeAudioDevice<span class="op">(</span>SDL_GetAudioStreamDevice<span class="op">(</span>stream<span class="op">));</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ...in your main loop... */</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* calculate a little more audio into `buf`, add it to `stream` */</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    SDL_PutAudioStreamData<span class="op">(</span>stream<span class="op">,</span> buf<span class="op">,</span> buflen<span class="op">);</span></span></code></pre></div>
<p>...these same migration examples apply to audio recording, just using
SDL_GetAudioStreamData instead of SDL_PutAudioStreamData.</p>
<p>SDL_AudioInit() and SDL_AudioQuit() have been removed. Instead you
can call SDL_InitSubSystem() and SDL_QuitSubSystem() with
SDL_INIT_AUDIO, which will properly refcount the subsystems. You can
choose a specific audio driver using SDL_AUDIO_DRIVER hint.</p>
<p>The <code>SDL_AUDIO_ALLOW_*</code> symbols have been removed; now one
may request the format they desire from the audio device, but ultimately
SDL_AudioStream will manage the difference. One can use
SDL_GetAudioDeviceFormat() to see what the final format is, if any
&quot;allowed&quot; changes should be accomodated by the app.</p>
<p>SDL_AudioDeviceID now represents both an open audio device&#39;s handle
(a &quot;logical&quot; device) and the instance ID that the hardware owns as long
as it exists on the system (a &quot;physical&quot; device). The separation between
device instances and device indexes is gone, and logical and physical
devices are almost entirely interchangeable at the API level.</p>
<p>Devices are opened by physical device instance ID, and a new logical
instance ID is generated by the open operation; This allows any device
to be opened multiple times, possibly by unrelated pieces of code. SDL
will manage the logical devices to provide a single stream of audio to
the physical device behind the scenes.</p>
<p>Devices are not opened by an arbitrary string name anymore, but by
device instance ID (or magic numbers to request a reasonable default,
like a NULL string would do in SDL2). In SDL2, the string was used to
open both a standard list of system devices, but also allowed for
arbitrary devices, such as hostnames of network sound servers. In SDL3,
many of the backends that supported arbitrary device names are obsolete
and have been removed; of those that remain, arbitrary devices will be
opened with a default device ID and an SDL_hint, so specific end-users
can set an environment variable to fit their needs and apps don&#39;t have
to concern themselves with it.</p>
<p>Many functions that would accept a device index and an
<code>iscapture</code> parameter now just take an SDL_AudioDeviceID, as
they are unique across all devices, instead of separate indices into
playback and recording device lists.</p>
<p>Rather than iterating over audio devices using a device index, there
are new functions, SDL_GetAudioPlaybackDevices() and
SDL_GetAudioRecordingDevices(), to get the current list of devices, and
new functions to get information about devices from their instance
ID:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_InitSubSystem<span class="op">(</span>SDL_INIT_AUDIO<span class="op">))</span> <span class="op">{</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">,</span> num_devices<span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        SDL_AudioDeviceID <span class="op">*</span>devices <span class="op">=</span> SDL_GetAudioPlaybackDevices<span class="op">(&amp;</span>num_devices<span class="op">);</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>devices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_devices<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                SDL_AudioDeviceID instance_id <span class="op">=</span> devices<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                SDL_Log<span class="op">(</span><span class="st">&quot;AudioDevice %&quot;</span> SDL_PRIu32 <span class="st">&quot;: </span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span> instance_id<span class="op">,</span> SDL_GetAudioDeviceName<span class="op">(</span>instance_id<span class="op">));</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>            SDL_free<span class="op">(</span>devices<span class="op">);</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        SDL_QuitSubSystem<span class="op">(</span>SDL_INIT_AUDIO<span class="op">);</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_LockAudioDevice() and SDL_UnlockAudioDevice() have been removed,
since there is no callback in another thread to protect. SDL&#39;s audio
subsystem and SDL_AudioStream maintain their own locks internally, so
audio streams are safe to use from any thread. If the app assigns a
callback to a specific stream, it can use the stream&#39;s lock through
SDL_LockAudioStream() if necessary.</p>
<p>SDL_PauseAudioDevice() no longer takes a second argument; it always
pauses the device. To unpause, use SDL_ResumeAudioDevice().</p>
<p>Audio devices, opened by SDL_OpenAudioDevice(), no longer start in a
paused state, as they don&#39;t begin processing audio until a stream is
bound.</p>
<p>SDL_GetAudioDeviceStatus() has been removed; there is now
SDL_AudioDevicePaused().</p>
<p>SDL_QueueAudio(), SDL_DequeueAudio, and SDL_ClearQueuedAudio and
SDL_GetQueuedAudioSize() have been removed; an SDL_AudioStream bound to
a device provides the exact same functionality.</p>
<p>APIs that use channel counts used to use a Uint8 for the channel; now
they use int.</p>
<p>SDL_AudioSpec has been reduced; now it only holds format, channel,
and sample rate. SDL_GetSilenceValueForFormat() can provide the
information from the SDL_AudioSpec&#39;s removed <code>silence</code> field.
SDL3 now manages the removed <code>samples</code> field; apps that want
more control over device latency and throughput can force a newly-opened
device&#39;s sample count with the SDL_HINT_AUDIO_DEVICE_SAMPLE_FRAMES hint,
but most apps should not risk messing with the defaults. The other SDL2
SDL_AudioSpec fields aren&#39;t relevant anymore.</p>
<p>SDL_GetAudioDeviceSpec() is removed; use SDL_GetAudioDeviceFormat()
instead.</p>
<p>SDL_GetDefaultAudioInfo() is removed; SDL_GetAudioDeviceFormat() with
SDL_AUDIO_DEVICE_DEFAULT_PLAYBACK or SDL_AUDIO_DEVICE_DEFAULT_RECORDING.
There is no replacement for querying the default device name; the string
is no longer used to open devices, and SDL3 will migrate between
physical devices on the fly if the system default changes, so if you
must show this to the user, a generic name like &quot;System default&quot; is
recommended.</p>
<p>SDL_MixAudioFormat() and SDL_MIX_MAXVOLUME have been removed in
favour of SDL_MixAudio(), which now takes the audio format, and a float
volume between 0.0 and 1.0.</p>
<p>SDL_FreeWAV has been removed and calls can be replaced with
SDL_free.</p>
<p>SDL_LoadWAV() is a proper function now and no longer a macro (but
offers the same functionality otherwise).</p>
<p>SDL_LoadWAV_IO() and SDL_LoadWAV() return an bool now, like most of
SDL. They no longer return a pointer to an SDL_AudioSpec.</p>
<p>SDL_AudioCVT interface has been removed, the SDL_AudioStream
interface (for audio supplied in pieces) or the new
SDL_ConvertAudioSamples() function (for converting a complete audio
buffer in one call) can be used instead.</p>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>    SDL_AudioCVT cvt<span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    SDL_BuildAudioCVT<span class="op">(&amp;</span>cvt<span class="op">,</span> src_format<span class="op">,</span> src_channels<span class="op">,</span> src_rate<span class="op">,</span> dst_format<span class="op">,</span> dst_channels<span class="op">,</span> dst_rate<span class="op">);</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    cvt<span class="op">.</span>len <span class="op">=</span> src_len<span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    cvt<span class="op">.</span>buf <span class="op">=</span> <span class="op">(</span>Uint8 <span class="op">*)</span> SDL_malloc<span class="op">(</span>src_len <span class="op">*</span> cvt<span class="op">.</span>len_mult<span class="op">);</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    SDL_memcpy<span class="op">(</span>cvt<span class="op">.</span>buf<span class="op">,</span> src_data<span class="op">,</span> src_len<span class="op">);</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    SDL_ConvertAudio<span class="op">(&amp;</span>cvt<span class="op">);</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    do_something<span class="op">(</span>cvt<span class="op">.</span>buf<span class="op">,</span> cvt<span class="op">.</span>len_cvt<span class="op">);</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>    Uint8 <span class="op">*</span>dst_data <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dst_len <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> SDL_AudioSpec src_spec <span class="op">=</span> <span class="op">{</span> src_format<span class="op">,</span> src_channels<span class="op">,</span> src_rate <span class="op">};</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> SDL_AudioSpec dst_spec <span class="op">=</span> <span class="op">{</span> dst_format<span class="op">,</span> dst_channels<span class="op">,</span> dst_rate <span class="op">};</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>SDL_ConvertAudioSamples<span class="op">(&amp;</span>src_spec<span class="op">,</span> src_data<span class="op">,</span> src_len<span class="op">,</span> <span class="op">&amp;</span>dst_spec<span class="op">,</span> <span class="op">&amp;</span>dst_data<span class="op">,</span> <span class="op">&amp;</span>dst_len<span class="op">))</span> <span class="op">{</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* error */</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    do_something<span class="op">(</span>dst_data<span class="op">,</span> dst_len<span class="op">);</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    SDL_free<span class="op">(</span>dst_data<span class="op">);</span></span></code></pre></div>
<p>AUDIO_U16, AUDIO_U16LSB, AUDIO_U16MSB, and AUDIO_U16SYS have been
removed. They were not heavily used, and one could not memset a buffer
in this format to silence with a single byte value. Use a different
audio format.</p>
<p>If you need to convert U16 audio data to a still-supported format at
runtime, the fastest, lossless conversion is to SDL_AUDIO_S16:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* this converts the buffer in-place. The buffer size does not change. */</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    Sint16 <span class="op">*</span>audio_ui16_to_si16<span class="op">(</span>Uint16 <span class="op">*</span>buffer<span class="op">,</span> <span class="dt">const</span> <span class="dt">size_t</span> num_samples<span class="op">)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">size_t</span> i<span class="op">;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">const</span> Uint16 <span class="op">*</span>src <span class="op">=</span> buffer<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        Sint16 <span class="op">*</span>dst <span class="op">=</span> <span class="op">(</span>Sint16 <span class="op">*)</span> buffer<span class="op">;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_samples<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>            dst<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>Sint16<span class="op">)</span> <span class="op">(</span>src<span class="op">[</span>i<span class="op">]</span> <span class="op">^</span> <span class="bn">0x8000</span><span class="op">);</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> dst<span class="op">;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>All remaining <code>AUDIO_*</code> symbols have been renamed to
<code>SDL_AUDIO_*</code> for API consistency, but othewise are identical
in value and usage.</p>
<p>In SDL2, SDL_AudioStream would convert/resample audio data during
input (via SDL_AudioStreamPut). In SDL3, it does this work when
requesting audio (via SDL_GetAudioStreamData, which would have been
SDL_AudioStreamGet in SDL2). The way you use an AudioStream is roughly
the same, just be aware that the workload moved to a different
phase.</p>
<p>In SDL2, SDL_AudioStreamAvailable() returns 0 if passed a NULL
stream. In SDL3, the equivalent SDL_GetAudioStreamAvailable() call
returns -1 and sets an error string, which matches other audiostream
APIs&#39; behavior.</p>
<p>In SDL2, SDL_AUDIODEVICEREMOVED events would fire for open devices
with the <code>which</code> field set to the SDL_AudioDeviceID of the
lost device, and in later SDL2 releases, would also fire this event with
a <code>which</code> field of zero for unopened devices, to signify that
the app might want to refresh the available device list. In SDL3, this
event works the same, except it won&#39;t ever fire with a zero; in this
case it&#39;ll return the physical device&#39;s SDL_AudioDeviceID. Any
still-open SDL_AudioDeviceIDs generated from this device with
SDL_OpenAudioDevice() will also fire a separate event.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_AudioStreamAvailable() =&gt; SDL_GetAudioStreamAvailable()</li>
<li>SDL_AudioStreamClear() =&gt; SDL_ClearAudioStream(), returns
bool</li>
<li>SDL_AudioStreamFlush() =&gt; SDL_FlushAudioStream(), returns
bool</li>
<li>SDL_AudioStreamGet() =&gt; SDL_GetAudioStreamData()</li>
<li>SDL_AudioStreamPut() =&gt; SDL_PutAudioStreamData(), returns
bool</li>
<li>SDL_FreeAudioStream() =&gt; SDL_DestroyAudioStream()</li>
<li>SDL_LoadWAV_RW() =&gt; SDL_LoadWAV_IO(), returns bool</li>
<li>SDL_MixAudioFormat() =&gt; SDL_MixAudio(), returns bool</li>
<li>SDL_NewAudioStream() =&gt; SDL_CreateAudioStream()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GetNumAudioDevices()</li>
<li>SDL_GetAudioDeviceSpec()</li>
<li>SDL_ConvertAudio()</li>
<li>SDL_BuildAudioCVT()</li>
<li>SDL_OpenAudio()</li>
<li>SDL_CloseAudio()</li>
<li>SDL_PauseAudio()</li>
<li>SDL_GetAudioStatus()</li>
<li>SDL_GetAudioDeviceStatus()</li>
<li>SDL_GetDefaultAudioInfo()</li>
<li>SDL_LockAudio()</li>
<li>SDL_LockAudioDevice()</li>
<li>SDL_UnlockAudio()</li>
<li>SDL_UnlockAudioDevice()</li>
<li>SDL_MixAudio()</li>
<li>SDL_QueueAudio()</li>
<li>SDL_DequeueAudio()</li>
<li>SDL_ClearAudioQueue()</li>
<li>SDL_GetQueuedAudioSize()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>AUDIO_F32 =&gt; SDL_AUDIO_F32LE</li>
<li>AUDIO_F32LSB =&gt; SDL_AUDIO_F32LE</li>
<li>AUDIO_F32MSB =&gt; SDL_AUDIO_F32BE</li>
<li>AUDIO_F32SYS =&gt; SDL_AUDIO_F32</li>
<li>AUDIO_S16 =&gt; SDL_AUDIO_S16LE</li>
<li>AUDIO_S16LSB =&gt; SDL_AUDIO_S16LE</li>
<li>AUDIO_S16MSB =&gt; SDL_AUDIO_S16BE</li>
<li>AUDIO_S16SYS =&gt; SDL_AUDIO_S16</li>
<li>AUDIO_S32 =&gt; SDL_AUDIO_S32LE</li>
<li>AUDIO_S32LSB =&gt; SDL_AUDIO_S32LE</li>
<li>AUDIO_S32MSB =&gt; SDL_AUDIO_S32BE</li>
<li>AUDIO_S32SYS =&gt; SDL_AUDIO_S32</li>
<li>AUDIO_S8 =&gt; SDL_AUDIO_S8</li>
<li>AUDIO_U8 =&gt; SDL_AUDIO_U8</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_MIX_MAXVOLUME - mixer volume is now a float between 0.0 and
1.0</li>
</ul>
<h2 id="sdl_cpuinfoh">SDL_cpuinfo.h</h2>
<p>The intrinsics headers (mmintrin.h, etc.) have been moved to
<code>&lt;SDL3/SDL_intrin.h&gt;</code> and are no longer automatically
included in SDL.h.</p>
<p>SDL_Has3DNow() has been removed; there is no replacement.</p>
<p>SDL_HasRDTSC() has been removed; there is no replacement. Don&#39;t use
the RDTSC opcode in modern times, use SDL_GetPerformanceCounter and
SDL_GetPerformanceFrequency instead.</p>
<p>SDL_SIMDAlloc(), SDL_SIMDRealloc(), and SDL_SIMDFree() have been
removed. You can use SDL_aligned_alloc() and SDL_aligned_free() with
SDL_GetSIMDAlignment() to get the same functionality.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_GetCPUCount() =&gt; SDL_GetNumLogicalCPUCores()</li>
<li>SDL_SIMDGetAlignment() =&gt; SDL_GetSIMDAlignment()</li>
</ul>
<h2 id="sdl_endianh">SDL_endian.h</h2>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_SwapBE16() =&gt; SDL_Swap16BE()</li>
<li>SDL_SwapBE32() =&gt; SDL_Swap32BE()</li>
<li>SDL_SwapBE64() =&gt; SDL_Swap64BE()</li>
<li>SDL_SwapLE16() =&gt; SDL_Swap16LE()</li>
<li>SDL_SwapLE32() =&gt; SDL_Swap32LE()</li>
<li>SDL_SwapLE64() =&gt; SDL_Swap64LE()</li>
</ul>
<h2 id="sdl_errorh">SDL_error.h</h2>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GetErrorMsg() - Can be implemented as
<code>SDL_strlcpy(errstr, SDL_GetError(), maxlen);</code></li>
</ul>
<h2 id="sdl_eventsh">SDL_events.h</h2>
<p>SDL_PRESSED and SDL_RELEASED have been removed. For the most part you
can replace uses of these with true and false respectively. Events which
had a field <code>state</code> to represent these values have had those
fields changed to bool <code>down</code>, e.g.
<code>event.key.state</code> is now <code>event.key.down</code>.</p>
<p>The timestamp member of the SDL_Event structure now represents
nanoseconds, and is populated with SDL_GetTicksNS()</p>
<p>The timestamp_us member of the sensor events has been renamed
sensor_timestamp and now represents nanoseconds. This value is filled in
from the hardware, if available, and may not be synchronized with values
returned from SDL_GetTicksNS().</p>
<p>You should set the event.common.timestamp field before passing an
event to SDL_PushEvent(). If the timestamp is 0 it will be filled in
with SDL_GetTicksNS().</p>
<p>Event memory is now managed by SDL, so you should not free the data
in SDL_EVENT_DROP_FILE, and if you want to hold onto the text in
SDL_EVENT_TEXT_EDITING and SDL_EVENT_TEXT_INPUT events, you should make
a copy of it. SDL_TEXTINPUTEVENT_TEXT_SIZE is no longer necessary and
has been removed.</p>
<p>Mouse events use floating point values for mouse coordinates and
relative motion values. You can get sub-pixel motion depending on the
platform and display scaling.</p>
<p>The SDL_DISPLAYEVENT_* events have been moved to top level events,
and SDL_DISPLAYEVENT has been removed. In general, handling this change
just means checking for the individual events instead of first checking
for SDL_DISPLAYEVENT and then checking for display events. You can
compare the event &gt;= SDL_EVENT_DISPLAY_FIRST and &lt;=
SDL_EVENT_DISPLAY_LAST if you need to see whether it&#39;s a display
event.</p>
<p>The SDL_WINDOWEVENT_* events have been moved to top level events, and
SDL_WINDOWEVENT has been removed. In general, handling this change just
means checking for the individual events instead of first checking for
SDL_WINDOWEVENT and then checking for window events. You can compare the
event &gt;= SDL_EVENT_WINDOW_FIRST and &lt;= SDL_EVENT_WINDOW_LAST if
you need to see whether it&#39;s a window event.</p>
<p>The SDL_EVENT_WINDOW_RESIZED event is always sent, even in response
to SDL_SetWindowSize().</p>
<p>The SDL_EVENT_WINDOW_SIZE_CHANGED event has been removed, and you can
use SDL_EVENT_WINDOW_PIXEL_SIZE_CHANGED to detect window backbuffer size
changes.</p>
<p>The keysym field of key events has been removed to remove one level
of indirection, and <code>sym</code> has been renamed
<code>key</code>.</p>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    SDL_Event event<span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    SDL_Keycode key <span class="op">=</span> event<span class="op">.</span>key<span class="op">.</span>keysym<span class="op">.</span>sym<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    SDL_Keymod mod <span class="op">=</span> event<span class="op">.</span>key<span class="op">.</span>keysym<span class="op">.</span>mod<span class="op">;</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>    SDL_Event event<span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    SDL_Keycode key <span class="op">=</span> event<span class="op">.</span>key<span class="op">.</span>key<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    SDL_Keymod mod <span class="op">=</span> event<span class="op">.</span>key<span class="op">.</span>mod<span class="op">;</span></span></code></pre></div>
<p>The gamepad event structures caxis, cbutton, cdevice, ctouchpad, and
csensor have been renamed gaxis, gbutton, gdevice, gtouchpad, and
gsensor.</p>
<p>The mouseX and mouseY fields of SDL_MouseWheelEvent have been renamed
mouse_x and mouse_y.</p>
<p>The touchId and fingerId fields of SDL_TouchFingerEvent have been
renamed touchID and fingerID.</p>
<p>The level field of SDL_JoyBatteryEvent has been split into state and
percent.</p>
<p>The iscapture field of SDL_AudioDeviceEvent has been renamed
recording.</p>
<p>SDL_QUERY, SDL_IGNORE, SDL_ENABLE, and SDL_DISABLE have been removed.
You can use the functions SDL_SetEventEnabled() and SDL_EventEnabled()
to set and query event processing state.</p>
<p>SDL_AddEventWatch() now returns false if it fails because it ran out
of memory and couldn&#39;t add the event watch callback.</p>
<p>SDL_RegisterEvents() now returns 0 if it couldn&#39;t allocate any user
events.</p>
<p>SDL_EventFilter functions now return bool.</p>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_APP_DIDENTERBACKGROUND =&gt; SDL_EVENT_DID_ENTER_BACKGROUND</li>
<li>SDL_APP_DIDENTERFOREGROUND =&gt; SDL_EVENT_DID_ENTER_FOREGROUND</li>
<li>SDL_APP_LOWMEMORY =&gt; SDL_EVENT_LOW_MEMORY</li>
<li>SDL_APP_TERMINATING =&gt; SDL_EVENT_TERMINATING</li>
<li>SDL_APP_WILLENTERBACKGROUND =&gt;
SDL_EVENT_WILL_ENTER_BACKGROUND</li>
<li>SDL_APP_WILLENTERFOREGROUND =&gt;
SDL_EVENT_WILL_ENTER_FOREGROUND</li>
<li>SDL_AUDIODEVICEADDED =&gt; SDL_EVENT_AUDIO_DEVICE_ADDED</li>
<li>SDL_AUDIODEVICEREMOVED =&gt; SDL_EVENT_AUDIO_DEVICE_REMOVED</li>
<li>SDL_CLIPBOARDUPDATE =&gt; SDL_EVENT_CLIPBOARD_UPDATE</li>
<li>SDL_CONTROLLERAXISMOTION =&gt; SDL_EVENT_GAMEPAD_AXIS_MOTION</li>
<li>SDL_CONTROLLERBUTTONDOWN =&gt; SDL_EVENT_GAMEPAD_BUTTON_DOWN</li>
<li>SDL_CONTROLLERBUTTONUP =&gt; SDL_EVENT_GAMEPAD_BUTTON_UP</li>
<li>SDL_CONTROLLERDEVICEADDED =&gt; SDL_EVENT_GAMEPAD_ADDED</li>
<li>SDL_CONTROLLERDEVICEREMAPPED =&gt; SDL_EVENT_GAMEPAD_REMAPPED</li>
<li>SDL_CONTROLLERDEVICEREMOVED =&gt; SDL_EVENT_GAMEPAD_REMOVED</li>
<li>SDL_CONTROLLERSENSORUPDATE =&gt;
SDL_EVENT_GAMEPAD_SENSOR_UPDATE</li>
<li>SDL_CONTROLLERSTEAMHANDLEUPDATED =&gt;
SDL_EVENT_GAMEPAD_STEAM_HANDLE_UPDATED</li>
<li>SDL_CONTROLLERTOUCHPADDOWN =&gt;
SDL_EVENT_GAMEPAD_TOUCHPAD_DOWN</li>
<li>SDL_CONTROLLERTOUCHPADMOTION =&gt;
SDL_EVENT_GAMEPAD_TOUCHPAD_MOTION</li>
<li>SDL_CONTROLLERTOUCHPADUP =&gt; SDL_EVENT_GAMEPAD_TOUCHPAD_UP</li>
<li>SDL_DROPBEGIN =&gt; SDL_EVENT_DROP_BEGIN</li>
<li>SDL_DROPCOMPLETE =&gt; SDL_EVENT_DROP_COMPLETE</li>
<li>SDL_DROPFILE =&gt; SDL_EVENT_DROP_FILE</li>
<li>SDL_DROPTEXT =&gt; SDL_EVENT_DROP_TEXT</li>
<li>SDL_FINGERDOWN =&gt; SDL_EVENT_FINGER_DOWN</li>
<li>SDL_FINGERMOTION =&gt; SDL_EVENT_FINGER_MOTION</li>
<li>SDL_FINGERUP =&gt; SDL_EVENT_FINGER_UP</li>
<li>SDL_FIRSTEVENT =&gt; SDL_EVENT_FIRST</li>
<li>SDL_JOYAXISMOTION =&gt; SDL_EVENT_JOYSTICK_AXIS_MOTION</li>
<li>SDL_JOYBALLMOTION =&gt; SDL_EVENT_JOYSTICK_BALL_MOTION</li>
<li>SDL_JOYBATTERYUPDATED =&gt; SDL_EVENT_JOYSTICK_BATTERY_UPDATED</li>
<li>SDL_JOYBUTTONDOWN =&gt; SDL_EVENT_JOYSTICK_BUTTON_DOWN</li>
<li>SDL_JOYBUTTONUP =&gt; SDL_EVENT_JOYSTICK_BUTTON_UP</li>
<li>SDL_JOYDEVICEADDED =&gt; SDL_EVENT_JOYSTICK_ADDED</li>
<li>SDL_JOYDEVICEREMOVED =&gt; SDL_EVENT_JOYSTICK_REMOVED</li>
<li>SDL_JOYHATMOTION =&gt; SDL_EVENT_JOYSTICK_HAT_MOTION</li>
<li>SDL_KEYDOWN =&gt; SDL_EVENT_KEY_DOWN</li>
<li>SDL_KEYMAPCHANGED =&gt; SDL_EVENT_KEYMAP_CHANGED</li>
<li>SDL_KEYUP =&gt; SDL_EVENT_KEY_UP</li>
<li>SDL_LASTEVENT =&gt; SDL_EVENT_LAST</li>
<li>SDL_LOCALECHANGED =&gt; SDL_EVENT_LOCALE_CHANGED</li>
<li>SDL_MOUSEBUTTONDOWN =&gt; SDL_EVENT_MOUSE_BUTTON_DOWN</li>
<li>SDL_MOUSEBUTTONUP =&gt; SDL_EVENT_MOUSE_BUTTON_UP</li>
<li>SDL_MOUSEMOTION =&gt; SDL_EVENT_MOUSE_MOTION</li>
<li>SDL_MOUSEWHEEL =&gt; SDL_EVENT_MOUSE_WHEEL</li>
<li>SDL_POLLSENTINEL =&gt; SDL_EVENT_POLL_SENTINEL</li>
<li>SDL_QUIT =&gt; SDL_EVENT_QUIT</li>
<li>SDL_RENDER_DEVICE_RESET =&gt; SDL_EVENT_RENDER_DEVICE_RESET</li>
<li>SDL_RENDER_TARGETS_RESET =&gt; SDL_EVENT_RENDER_TARGETS_RESET</li>
<li>SDL_SENSORUPDATE =&gt; SDL_EVENT_SENSOR_UPDATE</li>
<li>SDL_TEXTEDITING =&gt; SDL_EVENT_TEXT_EDITING</li>
<li>SDL_TEXTEDITING_EXT =&gt; SDL_EVENT_TEXT_EDITING_EXT</li>
<li>SDL_TEXTINPUT =&gt; SDL_EVENT_TEXT_INPUT</li>
<li>SDL_USEREVENT =&gt; SDL_EVENT_USER</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_DROPEVENT_DATA_SIZE - drop event data is dynamically
allocated</li>
<li>SDL_SYSWMEVENT - you can use SDL_SetWindowsMessageHook() and
SDL_SetX11EventHook() to watch and modify system events before SDL sees
them.</li>
<li>SDL_TEXTEDITINGEVENT_TEXT_SIZE - text editing event data is
dynamically allocated</li>
</ul>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_ControllerAxisEvent =&gt; SDL_GamepadAxisEvent</li>
<li>SDL_ControllerButtonEvent =&gt; SDL_GamepadButtonEvent</li>
<li>SDL_ControllerDeviceEvent =&gt; SDL_GamepadDeviceEvent</li>
<li>SDL_ControllerSensorEvent =&gt; SDL_GamepadSensorEvent</li>
<li>SDL_ControllerTouchpadEvent =&gt; SDL_GamepadTouchpadEvent</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_EventState() - replaced with SDL_SetEventEnabled()</li>
<li>SDL_GetEventState() - replaced with SDL_EventEnabled()</li>
</ul>
<p>The following enums have been renamed:</p>
<ul>
<li>SDL_eventaction =&gt; SDL_EventAction</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_DelEventWatch() =&gt; SDL_RemoveEventWatch()</li>
</ul>
<h2 id="sdl_gamecontrollerh">SDL_gamecontroller.h</h2>
<p>SDL_gamecontroller.h has been renamed SDL_gamepad.h, and all APIs
have been renamed to match.</p>
<p>The SDL_EVENT_GAMEPAD_ADDED event now provides the joystick instance
ID in the which member of the cdevice event structure.</p>
<p>The functions SDL_GetGamepads(), SDL_GetGamepadNameForID(),
SDL_GetGamepadPathForID(), SDL_GetGamepadPlayerIndexForID(),
SDL_GetGamepadGUIDForID(), SDL_GetGamepadVendorForID(),
SDL_GetGamepadProductForID(), SDL_GetGamepadProductVersionForID(), and
SDL_GetGamepadTypeForID() have been added to directly query the list of
available gamepads.</p>
<p>The gamepad face buttons have been renamed from A/B/X/Y to
North/South/East/West to indicate that they are positional rather than
hardware-specific. You can use SDL_GetGamepadButtonLabel() to get the
labels for the face buttons, e.g. A/B/X/Y or
Cross/Circle/Square/Triangle. The hint
SDL_HINT_GAMECONTROLLER_USE_BUTTON_LABELS is ignored, and mappings that
use this hint are translated correctly into positional buttons.
Applications should provide a way for users to swap between South/East
as their accept/cancel buttons, as this varies based on region and
muscle memory. You can use an approach similar to the following to
handle this:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CONFIRM_BUTTON SDL_GAMEPAD_BUTTON_SOUTH</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CANCEL_BUTTON SDL_GAMEPAD_BUTTON_EAST</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> flipped_buttons<span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> InitMappedButtons<span class="op">(</span>SDL_Gamepad <span class="op">*</span>gamepad<span class="op">)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>GetFlippedButtonSetting<span class="op">(&amp;</span>flipped_buttons<span class="op">))</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>SDL_GetGamepadButtonLabel<span class="op">(</span>gamepad<span class="op">,</span> SDL_GAMEPAD_BUTTON_SOUTH<span class="op">)</span> <span class="op">==</span> SDL_GAMEPAD_BUTTON_LABEL_B<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            flipped_buttons <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            flipped_buttons <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>SDL_GamepadButton GetMappedButton<span class="op">(</span>SDL_GamepadButton button<span class="op">)</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>flipped_buttons<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>button<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> SDL_GAMEPAD_BUTTON_SOUTH<span class="op">:</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> SDL_GAMEPAD_BUTTON_EAST<span class="op">;</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> SDL_GAMEPAD_BUTTON_EAST<span class="op">:</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> SDL_GAMEPAD_BUTTON_SOUTH<span class="op">;</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> SDL_GAMEPAD_BUTTON_WEST<span class="op">:</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> SDL_GAMEPAD_BUTTON_NORTH<span class="op">;</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> SDL_GAMEPAD_BUTTON_NORTH<span class="op">:</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> SDL_GAMEPAD_BUTTON_WEST<span class="op">;</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>SDL_GamepadButtonLabel GetConfirmActionLabel<span class="op">(</span>SDL_Gamepad <span class="op">*</span>gamepad<span class="op">)</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_GetGamepadButtonLabel<span class="op">(</span>gamepad<span class="op">,</span> GetMappedButton<span class="op">(</span>CONFIRM_BUTTON<span class="op">));</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>SDL_GamepadButtonLabel GetCancelActionLabel<span class="op">(</span>SDL_Gamepad <span class="op">*</span>gamepad<span class="op">)</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_GetGamepadButtonLabel<span class="op">(</span>gamepad<span class="op">,</span> GetMappedButton<span class="op">(</span>CANCEL_BUTTON<span class="op">));</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> HandleGamepadEvent<span class="op">(</span>SDL_Event <span class="op">*</span>event<span class="op">)</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>event<span class="op">-&gt;</span>type <span class="op">==</span> SDL_EVENT_GAMEPAD_BUTTON_DOWN<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>GetMappedButton<span class="op">(</span>event<span class="op">-&gt;</span>gbutton<span class="op">.</span>button<span class="op">))</span> <span class="op">{</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CONFIRM_BUTTON<span class="op">:</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* Handle confirm action */</span></span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CANCEL_BUTTON<span class="op">:</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* Handle cancel action */</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* ... */</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_GameControllerGetSensorDataWithTimestamp() has been removed. If
you want timestamps for the sensor data, you should use the
sensor_timestamp member of SDL_EVENT_GAMEPAD_SENSOR_UPDATE events.</p>
<p>SDL_CONTROLLER_TYPE_VIRTUAL has been removed, so virtual controllers
can emulate other gamepad types. If you need to know whether a
controller is virtual, you can use SDL_IsJoystickVirtual().</p>
<p>SDL_CONTROLLER_TYPE_AMAZON_LUNA has been removed, and can be replaced
with this code:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> SDL_IsJoystickAmazonLunaController<span class="op">(</span>Uint16 vendor_id<span class="op">,</span> Uint16 product_id<span class="op">)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">((</span>vendor_id <span class="op">==</span> <span class="bn">0x1949</span> <span class="op">&amp;&amp;</span> product_id <span class="op">==</span> <span class="bn">0x0419</span><span class="op">)</span> <span class="op">||</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>            <span class="op">(</span>vendor_id <span class="op">==</span> <span class="bn">0x0171</span> <span class="op">&amp;&amp;</span> product_id <span class="op">==</span> <span class="bn">0x0419</span><span class="op">));</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_CONTROLLER_TYPE_GOOGLE_STADIA has been removed, and can be
replaced with this code:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> SDL_IsJoystickGoogleStadiaController<span class="op">(</span>Uint16 vendor_id<span class="op">,</span> Uint16 product_id<span class="op">)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>vendor_id <span class="op">==</span> <span class="bn">0x18d1</span> <span class="op">&amp;&amp;</span> product_id <span class="op">==</span> <span class="bn">0x9400</span><span class="op">);</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_CONTROLLER_TYPE_NVIDIA_SHIELD has been removed, and can be
replaced with this code:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> SDL_IsJoystickNVIDIASHIELDController<span class="op">(</span>Uint16 vendor_id<span class="op">,</span> Uint16 product_id<span class="op">)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>vendor_id <span class="op">==</span> <span class="bn">0x0955</span> <span class="op">&amp;&amp;</span> <span class="op">(</span>product_id <span class="op">==</span> <span class="bn">0x7210</span> <span class="op">||</span> product_id <span class="op">==</span> <span class="bn">0x7214</span><span class="op">));</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The inputType and outputType fields of SDL_GamepadBinding have been
renamed input_type and output_type.</p>
<p>SDL_GetGamepadTouchpadFinger() takes a pointer to bool for the finger
state instead of a pointer to Uint8.</p>
<p>The following enums have been renamed:</p>
<ul>
<li>SDL_GameControllerAxis =&gt; SDL_GamepadAxis</li>
<li>SDL_GameControllerBindType =&gt; SDL_GamepadBindingType</li>
<li>SDL_GameControllerButton =&gt; SDL_GamepadButton</li>
<li>SDL_GameControllerType =&gt; SDL_GamepadType</li>
</ul>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_GameController =&gt; SDL_Gamepad</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_GameControllerAddMapping() =&gt; SDL_AddGamepadMapping()</li>
<li>SDL_GameControllerAddMappingsFromFile() =&gt;
SDL_AddGamepadMappingsFromFile()</li>
<li>SDL_GameControllerAddMappingsFromRW() =&gt;
SDL_AddGamepadMappingsFromIO()</li>
<li>SDL_GameControllerClose() =&gt; SDL_CloseGamepad()</li>
<li>SDL_GameControllerFromInstanceID() =&gt; SDL_GetGamepadFromID()</li>
<li>SDL_GameControllerFromPlayerIndex() =&gt;
SDL_GetGamepadFromPlayerIndex()</li>
<li>SDL_GameControllerGetAppleSFSymbolsNameForAxis() =&gt;
SDL_GetGamepadAppleSFSymbolsNameForAxis()</li>
<li>SDL_GameControllerGetAppleSFSymbolsNameForButton() =&gt;
SDL_GetGamepadAppleSFSymbolsNameForButton()</li>
<li>SDL_GameControllerGetAttached() =&gt; SDL_GamepadConnected()</li>
<li>SDL_GameControllerGetAxis() =&gt; SDL_GetGamepadAxis()</li>
<li>SDL_GameControllerGetAxisFromString() =&gt;
SDL_GetGamepadAxisFromString()</li>
<li>SDL_GameControllerGetButton() =&gt; SDL_GetGamepadButton()</li>
<li>SDL_GameControllerGetButtonFromString() =&gt;
SDL_GetGamepadButtonFromString()</li>
<li>SDL_GameControllerGetFirmwareVersion() =&gt;
SDL_GetGamepadFirmwareVersion()</li>
<li>SDL_GameControllerGetJoystick() =&gt; SDL_GetGamepadJoystick()</li>
<li>SDL_GameControllerGetNumTouchpadFingers() =&gt;
SDL_GetNumGamepadTouchpadFingers()</li>
<li>SDL_GameControllerGetNumTouchpads() =&gt;
SDL_GetNumGamepadTouchpads()</li>
<li>SDL_GameControllerGetPlayerIndex() =&gt;
SDL_GetGamepadPlayerIndex()</li>
<li>SDL_GameControllerGetProduct() =&gt; SDL_GetGamepadProduct()</li>
<li>SDL_GameControllerGetProductVersion() =&gt;
SDL_GetGamepadProductVersion()</li>
<li>SDL_GameControllerGetSensorData() =&gt; SDL_GetGamepadSensorData(),
returns bool</li>
<li>SDL_GameControllerGetSensorDataRate() =&gt;
SDL_GetGamepadSensorDataRate()</li>
<li>SDL_GameControllerGetSerial() =&gt; SDL_GetGamepadSerial()</li>
<li>SDL_GameControllerGetSteamHandle() =&gt;
SDL_GetGamepadSteamHandle()</li>
<li>SDL_GameControllerGetStringForAxis() =&gt;
SDL_GetGamepadStringForAxis()</li>
<li>SDL_GameControllerGetStringForButton() =&gt;
SDL_GetGamepadStringForButton()</li>
<li>SDL_GameControllerGetTouchpadFinger() =&gt;
SDL_GetGamepadTouchpadFinger(), returns bool</li>
<li>SDL_GameControllerGetType() =&gt; SDL_GetGamepadType()</li>
<li>SDL_GameControllerGetVendor() =&gt; SDL_GetGamepadVendor()</li>
<li>SDL_GameControllerHasAxis() =&gt; SDL_GamepadHasAxis()</li>
<li>SDL_GameControllerHasButton() =&gt; SDL_GamepadHasButton()</li>
<li>SDL_GameControllerHasSensor() =&gt; SDL_GamepadHasSensor()</li>
<li>SDL_GameControllerIsSensorEnabled() =&gt;
SDL_GamepadSensorEnabled()</li>
<li>SDL_GameControllerMapping() =&gt; SDL_GetGamepadMapping()</li>
<li>SDL_GameControllerMappingForGUID() =&gt;
SDL_GetGamepadMappingForGUID()</li>
<li>SDL_GameControllerName() =&gt; SDL_GetGamepadName()</li>
<li>SDL_GameControllerOpen() =&gt; SDL_OpenGamepad()</li>
<li>SDL_GameControllerPath() =&gt; SDL_GetGamepadPath()</li>
<li>SDL_GameControllerRumble() =&gt; SDL_RumbleGamepad(), returns
bool</li>
<li>SDL_GameControllerRumbleTriggers() =&gt;
SDL_RumbleGamepadTriggers(), returns bool</li>
<li>SDL_GameControllerSendEffect() =&gt; SDL_SendGamepadEffect(),
returns bool</li>
<li>SDL_GameControllerSetLED() =&gt; SDL_SetGamepadLED(), returns
bool</li>
<li>SDL_GameControllerSetPlayerIndex() =&gt;
SDL_SetGamepadPlayerIndex(), returns bool</li>
<li>SDL_GameControllerSetSensorEnabled() =&gt;
SDL_SetGamepadSensorEnabled(), returns bool</li>
<li>SDL_GameControllerUpdate() =&gt; SDL_UpdateGamepads()</li>
<li>SDL_IsGameController() =&gt; SDL_IsGamepad()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GameControllerEventState() - replaced with
SDL_SetGamepadEventsEnabled() and SDL_GamepadEventsEnabled()</li>
<li>SDL_GameControllerGetBindForAxis() - replaced with
SDL_GetGamepadBindings()</li>
<li>SDL_GameControllerGetBindForButton() - replaced with
SDL_GetGamepadBindings()</li>
<li>SDL_GameControllerHasLED() - replaced with
SDL_PROP_GAMEPAD_CAP_RGB_LED_BOOLEAN</li>
<li>SDL_GameControllerHasRumble() - replaced with
SDL_PROP_GAMEPAD_CAP_RUMBLE_BOOLEAN</li>
<li>SDL_GameControllerHasRumbleTriggers() - replaced with
SDL_PROP_GAMEPAD_CAP_TRIGGER_RUMBLE_BOOLEAN</li>
<li>SDL_GameControllerMappingForDeviceIndex() - replaced with
SDL_GetGamepadMappingForID()</li>
<li>SDL_GameControllerMappingForIndex() - replaced with
SDL_GetGamepadMappings()</li>
<li>SDL_GameControllerNameForIndex() - replaced with
SDL_GetGamepadNameForID()</li>
<li>SDL_GameControllerNumMappings() - replaced with
SDL_GetGamepadMappings()</li>
<li>SDL_GameControllerPathForIndex() - replaced with
SDL_GetGamepadPathForID()</li>
<li>SDL_GameControllerTypeForIndex() - replaced with
SDL_GetGamepadTypeForID()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_CONTROLLER_AXIS_INVALID =&gt; SDL_GAMEPAD_AXIS_INVALID</li>
<li>SDL_CONTROLLER_AXIS_LEFTX =&gt; SDL_GAMEPAD_AXIS_LEFTX</li>
<li>SDL_CONTROLLER_AXIS_LEFTY =&gt; SDL_GAMEPAD_AXIS_LEFTY</li>
<li>SDL_CONTROLLER_AXIS_MAX =&gt; SDL_GAMEPAD_AXIS_COUNT</li>
<li>SDL_CONTROLLER_AXIS_RIGHTX =&gt; SDL_GAMEPAD_AXIS_RIGHTX</li>
<li>SDL_CONTROLLER_AXIS_RIGHTY =&gt; SDL_GAMEPAD_AXIS_RIGHTY</li>
<li>SDL_CONTROLLER_AXIS_TRIGGERLEFT =&gt;
SDL_GAMEPAD_AXIS_LEFT_TRIGGER</li>
<li>SDL_CONTROLLER_AXIS_TRIGGERRIGHT =&gt;
SDL_GAMEPAD_AXIS_RIGHT_TRIGGER</li>
<li>SDL_CONTROLLER_BINDTYPE_AXIS =&gt; SDL_GAMEPAD_BINDTYPE_AXIS</li>
<li>SDL_CONTROLLER_BINDTYPE_BUTTON =&gt;
SDL_GAMEPAD_BINDTYPE_BUTTON</li>
<li>SDL_CONTROLLER_BINDTYPE_HAT =&gt; SDL_GAMEPAD_BINDTYPE_HAT</li>
<li>SDL_CONTROLLER_BINDTYPE_NONE =&gt; SDL_GAMEPAD_BINDTYPE_NONE</li>
<li>SDL_CONTROLLER_BUTTON_A =&gt; SDL_GAMEPAD_BUTTON_SOUTH</li>
<li>SDL_CONTROLLER_BUTTON_B =&gt; SDL_GAMEPAD_BUTTON_EAST</li>
<li>SDL_CONTROLLER_BUTTON_BACK =&gt; SDL_GAMEPAD_BUTTON_BACK</li>
<li>SDL_CONTROLLER_BUTTON_DPAD_DOWN =&gt;
SDL_GAMEPAD_BUTTON_DPAD_DOWN</li>
<li>SDL_CONTROLLER_BUTTON_DPAD_LEFT =&gt;
SDL_GAMEPAD_BUTTON_DPAD_LEFT</li>
<li>SDL_CONTROLLER_BUTTON_DPAD_RIGHT =&gt;
SDL_GAMEPAD_BUTTON_DPAD_RIGHT</li>
<li>SDL_CONTROLLER_BUTTON_DPAD_UP =&gt; SDL_GAMEPAD_BUTTON_DPAD_UP</li>
<li>SDL_CONTROLLER_BUTTON_GUIDE =&gt; SDL_GAMEPAD_BUTTON_GUIDE</li>
<li>SDL_CONTROLLER_BUTTON_INVALID =&gt; SDL_GAMEPAD_BUTTON_INVALID</li>
<li>SDL_CONTROLLER_BUTTON_LEFTSHOULDER =&gt;
SDL_GAMEPAD_BUTTON_LEFT_SHOULDER</li>
<li>SDL_CONTROLLER_BUTTON_LEFTSTICK =&gt;
SDL_GAMEPAD_BUTTON_LEFT_STICK</li>
<li>SDL_CONTROLLER_BUTTON_MAX =&gt; SDL_GAMEPAD_BUTTON_COUNT</li>
<li>SDL_CONTROLLER_BUTTON_MISC1 =&gt; SDL_GAMEPAD_BUTTON_MISC1</li>
<li>SDL_CONTROLLER_BUTTON_PADDLE1 =&gt;
SDL_GAMEPAD_BUTTON_RIGHT_PADDLE1</li>
<li>SDL_CONTROLLER_BUTTON_PADDLE2 =&gt;
SDL_GAMEPAD_BUTTON_LEFT_PADDLE1</li>
<li>SDL_CONTROLLER_BUTTON_PADDLE3 =&gt;
SDL_GAMEPAD_BUTTON_RIGHT_PADDLE2</li>
<li>SDL_CONTROLLER_BUTTON_PADDLE4 =&gt;
SDL_GAMEPAD_BUTTON_LEFT_PADDLE2</li>
<li>SDL_CONTROLLER_BUTTON_RIGHTSHOULDER =&gt;
SDL_GAMEPAD_BUTTON_RIGHT_SHOULDER</li>
<li>SDL_CONTROLLER_BUTTON_RIGHTSTICK =&gt;
SDL_GAMEPAD_BUTTON_RIGHT_STICK</li>
<li>SDL_CONTROLLER_BUTTON_START =&gt; SDL_GAMEPAD_BUTTON_START</li>
<li>SDL_CONTROLLER_BUTTON_TOUCHPAD =&gt;
SDL_GAMEPAD_BUTTON_TOUCHPAD</li>
<li>SDL_CONTROLLER_BUTTON_X =&gt; SDL_GAMEPAD_BUTTON_WEST</li>
<li>SDL_CONTROLLER_BUTTON_Y =&gt; SDL_GAMEPAD_BUTTON_NORTH</li>
<li>SDL_CONTROLLER_TYPE_NINTENDO_SWITCH_JOYCON_LEFT =&gt;
SDL_GAMEPAD_TYPE_NINTENDO_SWITCH_JOYCON_LEFT</li>
<li>SDL_CONTROLLER_TYPE_NINTENDO_SWITCH_JOYCON_PAIR =&gt;
SDL_GAMEPAD_TYPE_NINTENDO_SWITCH_JOYCON_PAIR</li>
<li>SDL_CONTROLLER_TYPE_NINTENDO_SWITCH_JOYCON_RIGHT =&gt;
SDL_GAMEPAD_TYPE_NINTENDO_SWITCH_JOYCON_RIGHT</li>
<li>SDL_CONTROLLER_TYPE_NINTENDO_SWITCH_PRO =&gt;
SDL_GAMEPAD_TYPE_NINTENDO_SWITCH_PRO</li>
<li>SDL_CONTROLLER_TYPE_PS3 =&gt; SDL_GAMEPAD_TYPE_PS3</li>
<li>SDL_CONTROLLER_TYPE_PS4 =&gt; SDL_GAMEPAD_TYPE_PS4</li>
<li>SDL_CONTROLLER_TYPE_PS5 =&gt; SDL_GAMEPAD_TYPE_PS5</li>
<li>SDL_CONTROLLER_TYPE_UNKNOWN =&gt; SDL_GAMEPAD_TYPE_STANDARD</li>
<li>SDL_CONTROLLER_TYPE_VIRTUAL =&gt; SDL_GAMEPAD_TYPE_VIRTUAL</li>
<li>SDL_CONTROLLER_TYPE_XBOX360 =&gt; SDL_GAMEPAD_TYPE_XBOX360</li>
<li>SDL_CONTROLLER_TYPE_XBOXONE =&gt; SDL_GAMEPAD_TYPE_XBOXONE</li>
</ul>
<h2 id="sdl_gestureh">SDL_gesture.h</h2>
<p>The gesture API has been removed. There is no replacement planned in
SDL3. However, the SDL2 code has been moved to a single-header library
that can be dropped into an SDL3 or SDL2 program, to continue to provide
this functionality to your app and aid migration. That is located in the
<a href="https://github.com/libsdl-org/SDL_gesture">SDL_gesture GitHub
repository</a>.</p>
<h2 id="sdl_guidh">SDL_guid.h</h2>
<p>SDL_GUIDToString() returns a const pointer to the string
representation of a GUID.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_GUIDFromString() =&gt; SDL_StringToGUID()</li>
</ul>
<h2 id="sdl_haptich">SDL_haptic.h</h2>
<p>Gamepads with simple rumble capability no longer show up in the SDL
haptics interface, instead you should use SDL_RumbleGamepad().</p>
<p>Rather than iterating over haptic devices using device index, there
is a new function SDL_GetHaptics() to get the current list of haptic
devices, and new functions to get information about haptic devices from
their instance ID:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_InitSubSystem<span class="op">(</span>SDL_INIT_HAPTIC<span class="op">))</span> <span class="op">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">,</span> num_haptics<span class="op">;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        SDL_HapticID <span class="op">*</span>haptics <span class="op">=</span> SDL_GetHaptics<span class="op">(&amp;</span>num_haptics<span class="op">);</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>haptics<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_haptics<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                SDL_HapticID instance_id <span class="op">=</span> haptics<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                SDL_Log<span class="op">(</span><span class="st">&quot;Haptic %&quot;</span> SDL_PRIu32 <span class="st">&quot;: </span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span> instance_id<span class="op">,</span> SDL_GetHapticNameForID<span class="op">(</span>instance_id<span class="op">));</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>            SDL_free<span class="op">(</span>haptics<span class="op">);</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>        SDL_QuitSubSystem<span class="op">(</span>SDL_INIT_HAPTIC<span class="op">);</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_GetHapticEffectStatus() now returns bool instead of an int
result. You should call SDL_GetHapticFeatures() to make sure effect
status is supported before calling this function.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_HapticClose() =&gt; SDL_CloseHaptic()</li>
<li>SDL_HapticDestroyEffect() =&gt; SDL_DestroyHapticEffect()</li>
<li>SDL_HapticGetEffectStatus() =&gt; SDL_GetHapticEffectStatus(),
returns bool</li>
<li>SDL_HapticNewEffect() =&gt; SDL_CreateHapticEffect()</li>
<li>SDL_HapticNumAxes() =&gt; SDL_GetNumHapticAxes()</li>
<li>SDL_HapticNumEffects() =&gt; SDL_GetMaxHapticEffects()</li>
<li>SDL_HapticNumEffectsPlaying() =&gt;
SDL_GetMaxHapticEffectsPlaying()</li>
<li>SDL_HapticOpen() =&gt; SDL_OpenHaptic()</li>
<li>SDL_HapticOpenFromJoystick() =&gt; SDL_OpenHapticFromJoystick()</li>
<li>SDL_HapticOpenFromMouse() =&gt; SDL_OpenHapticFromMouse()</li>
<li>SDL_HapticPause() =&gt; SDL_PauseHaptic(), returns bool</li>
<li>SDL_HapticQuery() =&gt; SDL_GetHapticFeatures()</li>
<li>SDL_HapticRumbleInit() =&gt; SDL_InitHapticRumble(), returns
bool</li>
<li>SDL_HapticRumblePlay() =&gt; SDL_PlayHapticRumble(), returns
bool</li>
<li>SDL_HapticRumbleStop() =&gt; SDL_StopHapticRumble(), returns
bool</li>
<li>SDL_HapticRunEffect() =&gt; SDL_RunHapticEffect(), returns bool</li>
<li>SDL_HapticSetAutocenter() =&gt; SDL_SetHapticAutocenter(), returns
bool</li>
<li>SDL_HapticSetGain() =&gt; SDL_SetHapticGain(), returns bool</li>
<li>SDL_HapticStopAll() =&gt; SDL_StopHapticEffects(), returns bool</li>
<li>SDL_HapticStopEffect() =&gt; SDL_StopHapticEffect(), returns
bool</li>
<li>SDL_HapticUnpause() =&gt; SDL_ResumeHaptic(), returns bool</li>
<li>SDL_HapticUpdateEffect() =&gt; SDL_UpdateHapticEffect(), returns
bool</li>
<li>SDL_JoystickIsHaptic() =&gt; SDL_IsJoystickHaptic()</li>
<li>SDL_MouseIsHaptic() =&gt; SDL_IsMouseHaptic()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_HapticIndex() - replaced with SDL_GetHapticID()</li>
<li>SDL_HapticName() - replaced with SDL_GetHapticNameForID()</li>
<li>SDL_HapticOpened() - replaced with SDL_GetHapticFromID()</li>
<li>SDL_NumHaptics() - replaced with SDL_GetHaptics()</li>
</ul>
<h2 id="sdl_hintsh">SDL_hints.h</h2>
<p>Calling SDL_GetHint() with the name of the hint being changed from
within a hint callback will now return the new value rather than the old
value. The old value is still passed as a parameter to the hint
callback.</p>
<p>The environment variables SDL_VIDEODRIVER and SDL_AUDIODRIVER have
been renamed to SDL_VIDEO_DRIVER and SDL_AUDIO_DRIVER, but the old names
are still supported as a fallback.</p>
<p>The environment variables SDL_VIDEO_X11_WMCLASS and
SDL_VIDEO_WAYLAND_WMCLASS have been removed and replaced by either using
the appindentifier param to SDL_SetAppMetadata() or setting
SDL_PROP_APP_METADATA_IDENTIFIER_STRING with
SDL_SetAppMetadataProperty()</p>
<p>The environment variable AUDIODEV is used exclusively to specify the
audio device for the OSS and NetBSD audio drivers. Its use in the ALSA
driver has been replaced with the hint
SDL_HINT_AUDIO_ALSA_DEFAULT_DEVICE and in the sndio driver with the
environment variable AUDIODEVICE.</p>
<p>The following hints have been renamed:</p>
<ul>
<li>SDL_HINT_ALLOW_TOPMOST =&gt; SDL_HINT_WINDOW_ALLOW_TOPMOST</li>
<li>SDL_HINT_AUDIODRIVER =&gt; SDL_HINT_AUDIO_DRIVER</li>
<li>SDL_HINT_DIRECTINPUT_ENABLED =&gt;
SDL_HINT_JOYSTICK_DIRECTINPUT</li>
<li>SDL_HINT_GDK_TEXTINPUT_DEFAULT =&gt;
SDL_HINT_GDK_TEXTINPUT_DEFAULT_TEXT</li>
<li>SDL_HINT_JOYSTICK_GAMECUBE_RUMBLE_BRAKE =&gt;
SDL_HINT_JOYSTICK_HIDAPI_GAMECUBE_RUMBLE_BRAKE</li>
<li>SDL_HINT_JOYSTICK_HIDAPI_PS4_RUMBLE =&gt;
SDL_HINT_JOYSTICK_ENHANCED_REPORTS</li>
<li>SDL_HINT_JOYSTICK_HIDAPI_PS5_RUMBLE =&gt;
SDL_HINT_JOYSTICK_ENHANCED_REPORTS</li>
<li>SDL_HINT_LINUX_DIGITAL_HATS =&gt;
SDL_HINT_JOYSTICK_LINUX_DIGITAL_HATS</li>
<li>SDL_HINT_LINUX_HAT_DEADZONES =&gt;
SDL_HINT_JOYSTICK_LINUX_HAT_DEADZONES</li>
<li>SDL_HINT_LINUX_JOYSTICK_CLASSIC =&gt;
SDL_HINT_JOYSTICK_LINUX_CLASSIC</li>
<li>SDL_HINT_LINUX_JOYSTICK_DEADZONES =&gt;
SDL_HINT_JOYSTICK_LINUX_DEADZONES</li>
<li>SDL_HINT_VIDEODRIVER =&gt; SDL_HINT_VIDEO_DRIVER</li>
<li>SDL_HINT_VIDEO_WAYLAND_EMULATE_MOUSE_WARP =&gt;
SDL_HINT_MOUSE_EMULATE_WARP_WITH_RELATIVE</li>
</ul>
<p>The following hints have been removed:</p>
<ul>
<li>SDL_HINT_ACCELEROMETER_AS_JOYSTICK</li>
<li>SDL_HINT_ANDROID_BLOCK_ON_PAUSE_PAUSEAUDIO - the audio will be
paused when the application is paused, and
SDL_HINT_ANDROID_BLOCK_ON_PAUSE can be used to control that</li>
<li>SDL_HINT_AUDIO_DEVICE_APP_NAME - replaced by either using the
appname param to SDL_SetAppMetadata() or setting
SDL_PROP_APP_METADATA_NAME_STRING with SDL_SetAppMetadataProperty()</li>
<li>SDL_HINT_GAMECONTROLLER_USE_BUTTON_LABELS - gamepad buttons are
always positional</li>
<li>SDL_HINT_GRAB_KEYBOARD - use SDL_SetWindowKeyboardGrab()
instead</li>
<li>SDL_HINT_IDLE_TIMER_DISABLED - use SDL_DisableScreenSaver()
instead</li>
<li>SDL_HINT_IME_INTERNAL_EDITING - replaced with
SDL_HINT_IME_IMPLEMENTED_UI</li>
<li>SDL_HINT_IME_SHOW_UI - replaced with
SDL_HINT_IME_IMPLEMENTED_UI</li>
<li>SDL_HINT_IME_SUPPORT_EXTENDED_TEXT - the normal text editing event
has extended text</li>
<li>SDL_HINT_MOUSE_RELATIVE_MODE_WARP - relative mode is always
implemented at the hardware level or reported as unavailable</li>
<li>SDL_HINT_MOUSE_RELATIVE_SCALING - mouse coordinates are no longer
automatically scaled by the SDL renderer</li>
<li>SDL_HINT_PS2_DYNAMIC_VSYNC - use SDL_SetRenderVSync(renderer, -1)
instead</li>
<li>SDL_HINT_RENDER_BATCHING - Render batching is always enabled, apps
should call SDL_FlushRenderer() before calling into a lower-level
graphics API.</li>
<li>SDL_HINT_RENDER_LOGICAL_SIZE_MODE - the logical size mode is
explicitly set with SDL_SetRenderLogicalPresentation()</li>
<li>SDL_HINT_RENDER_OPENGL_SHADERS - shaders are always used if they are
available</li>
<li>SDL_HINT_RENDER_SCALE_QUALITY - textures now default to linear
filtering, use SDL_SetTextureScaleMode(texture, SDL_SCALEMODE_NEAREST)
if you want nearest pixel mode instead</li>
<li>SDL_HINT_THREAD_STACK_SIZE - the stack size can be specified using
SDL_CreateThreadWithProperties()</li>
<li>SDL_HINT_VIDEO_EXTERNAL_CONTEXT - replaced with
SDL_PROP_WINDOW_CREATE_EXTERNAL_GRAPHICS_CONTEXT_BOOLEAN in
SDL_CreateWindowWithProperties()</li>
<li>SDL_HINT_VIDEO_FOREIGN_WINDOW_OPENGL - replaced with
SDL_PROP_WINDOW_CREATE_OPENGL_BOOLEAN in
SDL_CreateWindowWithProperties()</li>
<li>SDL_HINT_VIDEO_FOREIGN_WINDOW_VULKAN - replaced with
SDL_PROP_WINDOW_CREATE_VULKAN_BOOLEAN in
SDL_CreateWindowWithProperties()</li>
<li>SDL_HINT_VIDEO_HIGHDPI_DISABLED - high DPI support is always
enabled</li>
<li>SDL_HINT_VIDEO_WINDOW_SHARE_PIXEL_FORMAT - replaced with
SDL_PROP_WINDOW_CREATE_WIN32_PIXEL_FORMAT_HWND_POINTER in
SDL_CreateWindowWithProperties()</li>
<li>SDL_HINT_VIDEO_X11_FORCE_EGL - use SDL_HINT_VIDEO_FORCE_EGL
instead</li>
<li>SDL_HINT_VIDEO_X11_XINERAMA - Xinerama no longer supported by the
X11 backend</li>
<li>SDL_HINT_VIDEO_X11_XVIDMODE - Xvidmode no longer supported by the
X11 backend</li>
<li>SDL_HINT_WINDOWS_DISABLE_THREAD_NAMING - SDL now properly handles
the 0x406D1388 Exception if no debugger intercepts it, preventing its
propagation.</li>
<li>SDL_HINT_WINDOWS_FORCE_MUTEX_CRITICAL_SECTIONS - Slim Reader/Writer
Locks are always used if available</li>
<li>SDL_HINT_WINDOWS_NO_CLOSE_ON_ALT_F4 - replaced with
SDL_HINT_WINDOWS_CLOSE_ON_ALT_F4, defaulting to true</li>
<li>SDL_HINT_WINRT_HANDLE_BACK_BUTTON - WinRT support was removed in
SDL3.</li>
<li>SDL_HINT_WINRT_PRIVACY_POLICY_LABEL - WinRT support was removed in
SDL3.</li>
<li>SDL_HINT_WINRT_PRIVACY_POLICY_URL - WinRT support was removed in
SDL3.</li>
<li>SDL_HINT_XINPUT_USE_OLD_JOYSTICK_MAPPING</li>
</ul>
<p>The following environment variables have been renamed:</p>
<ul>
<li>SDL_AUDIODRIVER =&gt; SDL_AUDIO_DRIVER</li>
<li>SDL_PATH_DSP =&gt; AUDIODEV</li>
<li>SDL_VIDEODRIVER =&gt; SDL_VIDEO_DRIVER</li>
</ul>
<p>The following environment variables have been removed:</p>
<ul>
<li>SDL_AUDIO_ALSA_DEBUG - replaced by setting the hint SDL_HINT_LOGGING
to &quot;audio=debug&quot;</li>
<li>SDL_DISKAUDIODELAY - replaced with the hint
SDL_HINT_AUDIO_DISK_TIMESCALE which allows scaling the audio time rather
than specifying an absolute delay.</li>
<li>SDL_DISKAUDIOFILE - replaced with the hint
SDL_HINT_AUDIO_DISK_OUTPUT_FILE</li>
<li>SDL_DISKAUDIOFILEIN - replaced with the hint
SDL_HINT_AUDIO_DISK_INPUT_FILE</li>
<li>SDL_DUMMYAUDIODELAY - replaced with the hint
SDL_HINT_AUDIO_DUMMY_TIMESCALE which allows scaling the audio time
rather than specifying an absolute delay.</li>
<li>SDL_HAPTIC_GAIN_MAX</li>
<li>SDL_HIDAPI_DISABLE_LIBUSB - replaced with the hint
SDL_HINT_HIDAPI_LIBUSB</li>
<li>SDL_HIDAPI_JOYSTICK_DISABLE_UDEV - replaced with the hint
SDL_HINT_HIDAPI_UDEV</li>
<li>SDL_INPUT_FREEBSD_KEEP_KBD - replaced with the hint
SDL_HINT_MUTE_CONSOLE_KEYBOARD</li>
<li>SDL_INPUT_LINUX_KEEP_KBD - replaced with the hint
SDL_HINT_MUTE_CONSOLE_KEYBOARD</li>
<li>VITA_DISABLE_TOUCH_BACK - replaced with the hint
SDL_HINT_VITA_ENABLE_BACK_TOUCH</li>
<li>VITA_DISABLE_TOUCH_FRONT - replaced with the hint
SDL_HINT_VITA_ENABLE_FRONT_TOUCH</li>
<li>VITA_MODULE_PATH - replaced with the hint
SDL_HINT_VITA_MODULE_PATH</li>
<li>VITA_PVR_OGL - replaced with the hint SDL_HINT_VITA_PVR_OPENGL</li>
<li>VITA_PVR_SKIP_INIT - replaced with the hint
SDL_HINT_VITA_PVR_INIT</li>
<li>VITA_RESOLUTION - replaced with the hint
SDL_HINT_VITA_RESOLUTION</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_ClearHints() - replaced with SDL_ResetHints()</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_DelHintCallback() =&gt; SDL_RemoveHintCallback()</li>
</ul>
<h2 id="sdl_inith">SDL_init.h</h2>
<p>On Haiku OS, SDL no longer sets the current working directory to the
executable&#39;s path during SDL_Init(). If you need this functionality, the
fastest solution is to add this code directly after the call to
SDL_Init:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path <span class="op">=</span> SDL_GetBasePath<span class="op">();</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>        chdir<span class="op">(</span>path<span class="op">);</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_INIT_GAMECONTROLLER =&gt; SDL_INIT_GAMEPAD</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_INIT_NOPARACHUTE</li>
<li>SDL_INIT_EVERYTHING - you should only initialize the subsystems you
are using</li>
<li>SDL_INIT_TIMER - no longer needed before calling SDL_AddTimer()</li>
</ul>
<h2 id="sdl_joystickh">SDL_joystick.h</h2>
<p>SDL_JoystickID has changed from Sint32 to Uint32, with an invalid ID
being 0.</p>
<p>Rather than iterating over joysticks using device index, there is a
new function SDL_GetJoysticks() to get the current list of joysticks,
and new functions to get information about joysticks from their instance
ID:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_InitSubSystem<span class="op">(</span>SDL_INIT_JOYSTICK<span class="op">))</span> <span class="op">{</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">,</span> num_joysticks<span class="op">;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        SDL_JoystickID <span class="op">*</span>joysticks <span class="op">=</span> SDL_GetJoysticks<span class="op">(&amp;</span>num_joysticks<span class="op">);</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>joysticks<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_joysticks<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                SDL_JoystickID instance_id <span class="op">=</span> joysticks<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>name <span class="op">=</span> SDL_GetJoystickNameForID<span class="op">(</span>instance_id<span class="op">);</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path <span class="op">=</span> SDL_GetJoystickPathForID<span class="op">(</span>instance_id<span class="op">);</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                SDL_Log<span class="op">(</span><span class="st">&quot;Joystick %&quot;</span> SDL_PRIu32 <span class="st">&quot;: </span><span class="sc">%s%s%s</span><span class="st"> VID 0x</span><span class="sc">%.4x</span><span class="st">, PID 0x</span><span class="sc">%.4x</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>                        instance_id<span class="op">,</span> name <span class="op">?</span> name <span class="op">:</span> <span class="st">&quot;Unknown&quot;</span><span class="op">,</span> path <span class="op">?</span> <span class="st">&quot;, &quot;</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="op">,</span> path <span class="op">?</span> path <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="op">,</span> SDL_GetJoystickVendorForID<span class="op">(</span>instance_id<span class="op">),</span> SDL_GetJoystickProductForID<span class="op">(</span>instance_id<span class="op">));</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>            SDL_free<span class="op">(</span>joysticks<span class="op">);</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>        SDL_QuitSubSystem<span class="op">(</span>SDL_INIT_JOYSTICK<span class="op">);</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The SDL_EVENT_JOYSTICK_ADDED event now provides the joystick instance
ID in the <code>which</code> member of the jdevice event structure.</p>
<p>The functions SDL_GetJoysticks(), SDL_GetJoystickNameForID(),
SDL_GetJoystickPathForID(), SDL_GetJoystickPlayerIndexForID(),
SDL_GetJoystickGUIDForID(), SDL_GetJoystickVendorForID(),
SDL_GetJoystickProductForID(), SDL_GetJoystickProductVersionForID(), and
SDL_GetJoystickTypeForID() have been added to directly query the list of
available joysticks.</p>
<p>SDL_AttachVirtualJoystick() now returns the joystick instance ID
instead of a device index, and returns 0 if there was an error.</p>
<p>SDL_VirtualJoystickDesc version should not be set to
SDL_VIRTUAL_JOYSTICK_DESC_VERSION, instead the structure should be
initialized using SDL_INIT_INTERFACE().</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_JoystickAttachVirtualEx() =&gt; SDL_AttachVirtualJoystick()</li>
<li>SDL_JoystickClose() =&gt; SDL_CloseJoystick()</li>
<li>SDL_JoystickDetachVirtual() =&gt; SDL_DetachVirtualJoystick(),
returns bool</li>
<li>SDL_JoystickFromInstanceID() =&gt; SDL_GetJoystickFromID()</li>
<li>SDL_JoystickFromPlayerIndex() =&gt;
SDL_GetJoystickFromPlayerIndex()</li>
<li>SDL_JoystickGetAttached() =&gt; SDL_JoystickConnected()</li>
<li>SDL_JoystickGetAxis() =&gt; SDL_GetJoystickAxis()</li>
<li>SDL_JoystickGetAxisInitialState() =&gt;
SDL_GetJoystickAxisInitialState()</li>
<li>SDL_JoystickGetBall() =&gt; SDL_GetJoystickBall(), returns bool</li>
<li>SDL_JoystickGetButton() =&gt; SDL_GetJoystickButton()</li>
<li>SDL_JoystickGetFirmwareVersion() =&gt;
SDL_GetJoystickFirmwareVersion()</li>
<li>SDL_JoystickGetGUID() =&gt; SDL_GetJoystickGUID()</li>
<li>SDL_JoystickGetGUIDFromString() =&gt; SDL_StringToGUID()</li>
<li>SDL_JoystickGetHat() =&gt; SDL_GetJoystickHat()</li>
<li>SDL_JoystickGetPlayerIndex() =&gt; SDL_GetJoystickPlayerIndex()</li>
<li>SDL_JoystickGetProduct() =&gt; SDL_GetJoystickProduct()</li>
<li>SDL_JoystickGetProductVersion() =&gt;
SDL_GetJoystickProductVersion()</li>
<li>SDL_JoystickGetSerial() =&gt; SDL_GetJoystickSerial()</li>
<li>SDL_JoystickGetType() =&gt; SDL_GetJoystickType()</li>
<li>SDL_JoystickGetVendor() =&gt; SDL_GetJoystickVendor()</li>
<li>SDL_JoystickInstanceID() =&gt; SDL_GetJoystickID()</li>
<li>SDL_JoystickIsVirtual() =&gt; SDL_IsJoystickVirtual()</li>
<li>SDL_JoystickName() =&gt; SDL_GetJoystickName()</li>
<li>SDL_JoystickNumAxes() =&gt; SDL_GetNumJoystickAxes()</li>
<li>SDL_JoystickNumBalls() =&gt; SDL_GetNumJoystickBalls()</li>
<li>SDL_JoystickNumButtons() =&gt; SDL_GetNumJoystickButtons()</li>
<li>SDL_JoystickNumHats() =&gt; SDL_GetNumJoystickHats()</li>
<li>SDL_JoystickOpen() =&gt; SDL_OpenJoystick()</li>
<li>SDL_JoystickPath() =&gt; SDL_GetJoystickPath()</li>
<li>SDL_JoystickRumble() =&gt; SDL_RumbleJoystick(), returns bool</li>
<li>SDL_JoystickRumbleTriggers() =&gt; SDL_RumbleJoystickTriggers(),
returns bool</li>
<li>SDL_JoystickSendEffect() =&gt; SDL_SendJoystickEffect(), returns
bool</li>
<li>SDL_JoystickSetLED() =&gt; SDL_SetJoystickLED(), returns bool</li>
<li>SDL_JoystickSetPlayerIndex() =&gt; SDL_SetJoystickPlayerIndex(),
returns bool</li>
<li>SDL_JoystickSetVirtualAxis() =&gt; SDL_SetJoystickVirtualAxis(),
returns bool</li>
<li>SDL_JoystickSetVirtualButton() =&gt; SDL_SetJoystickVirtualButton(),
returns bool</li>
<li>SDL_JoystickSetVirtualHat() =&gt; SDL_SetJoystickVirtualHat(),
returns bool</li>
<li>SDL_JoystickUpdate() =&gt; SDL_UpdateJoysticks()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_JOYSTICK_TYPE_GAMECONTROLLER =&gt;
SDL_JOYSTICK_TYPE_GAMEPAD</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_JoystickAttachVirtual() - replaced with
SDL_AttachVirtualJoystick()</li>
<li>SDL_JoystickCurrentPowerLevel() - replaced with
SDL_GetJoystickConnectionState() and SDL_GetJoystickPowerInfo()</li>
<li>SDL_JoystickEventState() - replaced with
SDL_SetJoystickEventsEnabled() and SDL_JoystickEventsEnabled()</li>
<li>SDL_JoystickGetDeviceGUID() - replaced with
SDL_GetJoystickGUIDForID()</li>
<li>SDL_JoystickGetDeviceInstanceID()</li>
<li>SDL_JoystickGetDevicePlayerIndex() - replaced with
SDL_GetJoystickPlayerIndexForID()</li>
<li>SDL_JoystickGetDeviceProduct() - replaced with
SDL_GetJoystickProductForID()</li>
<li>SDL_JoystickGetDeviceProductVersion() - replaced with
SDL_GetJoystickProductVersionForID()</li>
<li>SDL_JoystickGetDeviceType() - replaced with
SDL_GetJoystickTypeForID()</li>
<li>SDL_JoystickGetDeviceVendor() - replaced with
SDL_GetJoystickVendorForID()</li>
<li>SDL_JoystickGetGUIDString() - replaced with SDL_GUIDToString()</li>
<li>SDL_JoystickHasLED() - replaced with
SDL_PROP_JOYSTICK_CAP_RGB_LED_BOOLEAN</li>
<li>SDL_JoystickHasRumble() - replaced with
SDL_PROP_JOYSTICK_CAP_RUMBLE_BOOLEAN</li>
<li>SDL_JoystickHasRumbleTriggers() - replaced with
SDL_PROP_JOYSTICK_CAP_TRIGGER_RUMBLE_BOOLEAN</li>
<li>SDL_JoystickNameForIndex() - replaced with
SDL_GetJoystickNameForID()</li>
<li>SDL_JoystickPathForIndex() - replaced with
SDL_GetJoystickPathForID()</li>
<li>SDL_NumJoysticks() - replaced with SDL_GetJoysticks()</li>
<li>SDL_VIRTUAL_JOYSTICK_DESC_VERSION - no longer needed</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_IPHONE_MAX_GFORCE</li>
<li>SDL_JOYBALLMOTION</li>
</ul>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_JoystickGUID =&gt; SDL_GUID</li>
</ul>
<h2 id="sdl_keyboardh">SDL_keyboard.h</h2>
<p>Text input is no longer automatically enabled when initializing
video, you should call SDL_StartTextInput() when you want to receive
text input and call SDL_StopTextInput() when you are done. Starting text
input may shown an input method editor (IME) and cause key up/down
events to be skipped, so should only be enabled when the application
wants text input.</p>
<p>The text input state hase been changed to be window-specific.
SDL_StartTextInput(), SDL_StopTextInput(), SDL_TextInputActive(), and
SDL_ClearComposition() all now take a window parameter.</p>
<p>SDL_GetDefaultKeyFromScancode(), SDL_GetKeyFromScancode(), and
SDL_GetScancodeFromKey() take an SDL_Keymod parameter and use that to
provide the correct result based on keyboard modifier state.</p>
<p>SDL_GetKeyboardState() returns a pointer to bool instead of
Uint8.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_IsScreenKeyboardShown() =&gt; SDL_ScreenKeyboardShown()</li>
<li>SDL_IsTextInputActive() =&gt; SDL_TextInputActive()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_IsTextInputShown()</li>
<li>SDL_SetTextInputRect() - replaced with SDL_SetTextInputArea()</li>
</ul>
<p>The following structures have been removed:</p>
<ul>
<li>SDL_Keysym</li>
</ul>
<h2 id="sdl_keycodeh">SDL_keycode.h</h2>
<p>SDL_Keycode is now Uint32 and the SDLK_* constants are now defines
instead of an enum, to more clearly reflect that they are a subset of
the possible values of an SDL_Keycode.</p>
<p>In addition to the <code>SDLK_SCANCODE_MASK</code> bit found on key
codes that directly map to scancodes, there is now the
<code>SDLK_EXTENDED_MASK</code> bit used to denote key codes that don&#39;t
have a corresponding scancode, and aren&#39;t a unicode value.</p>
<p>The following symbols have been removed:</p>
<ul>
<li>KMOD_RESERVED - No replacement. A bit named &quot;RESERVED&quot; probably
shouldn&#39;t be used in an app, but if you need it, this was equivalent to
KMOD_SCROLL (0x8000) in SDL2.</li>
<li>SDLK_WWW</li>
<li>SDLK_MAIL</li>
<li>SDLK_CALCULATOR</li>
<li>SDLK_COMPUTER</li>
<li>SDLK_BRIGHTNESSDOWN</li>
<li>SDLK_BRIGHTNESSUP</li>
<li>SDLK_DISPLAYSWITCH</li>
<li>SDLK_KBDILLUMTOGGLE</li>
<li>SDLK_KBDILLUMDOWN</li>
<li>SDLK_KBDILLUMUP</li>
<li>SDLK_APP1</li>
<li>SDLK_APP2</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>KMOD_ALT =&gt; SDL_KMOD_ALT</li>
<li>KMOD_CAPS =&gt; SDL_KMOD_CAPS</li>
<li>KMOD_CTRL =&gt; SDL_KMOD_CTRL</li>
<li>KMOD_GUI =&gt; SDL_KMOD_GUI</li>
<li>KMOD_LALT =&gt; SDL_KMOD_LALT</li>
<li>KMOD_LCTRL =&gt; SDL_KMOD_LCTRL</li>
<li>KMOD_LGUI =&gt; SDL_KMOD_LGUI</li>
<li>KMOD_LSHIFT =&gt; SDL_KMOD_LSHIFT</li>
<li>KMOD_MODE =&gt; SDL_KMOD_MODE</li>
<li>KMOD_NONE =&gt; SDL_KMOD_NONE</li>
<li>KMOD_NUM =&gt; SDL_KMOD_NUM</li>
<li>KMOD_RALT =&gt; SDL_KMOD_RALT</li>
<li>KMOD_RCTRL =&gt; SDL_KMOD_RCTRL</li>
<li>KMOD_RGUI =&gt; SDL_KMOD_RGUI</li>
<li>KMOD_RSHIFT =&gt; SDL_KMOD_RSHIFT</li>
<li>KMOD_SCROLL =&gt; SDL_KMOD_SCROLL</li>
<li>KMOD_SHIFT =&gt; SDL_KMOD_SHIFT</li>
<li>SDLK_AUDIOFASTFORWARD =&gt; SDLK_MEDIA_FAST_FORWARD</li>
<li>SDLK_AUDIOMUTE =&gt; SDLK_MUTE</li>
<li>SDLK_AUDIONEXT =&gt; SDLK_MEDIA_NEXT_TRACK</li>
<li>SDLK_AUDIOPLAY =&gt; SDLK_MEDIA_PLAY</li>
<li>SDLK_AUDIOPREV =&gt; SDLK_MEDIA_PREVIOUS_TRACK</li>
<li>SDLK_AUDIOREWIND =&gt; SDLK_MEDIA_REWIND</li>
<li>SDLK_AUDIOSTOP =&gt; SDLK_MEDIA_STOP</li>
<li>SDLK_BACKQUOTE =&gt; SDLK_GRAVE</li>
<li>SDLK_EJECT =&gt; SDLK_MEDIA_EJECT</li>
<li>SDLK_MEDIASELECT =&gt; SDLK_MEDIA_SELECT</li>
<li>SDLK_QUOTE =&gt; SDLK_APOSTROPHE</li>
<li>SDLK_QUOTEDBL =&gt; SDLK_DBLAPOSTROPHE</li>
<li>SDLK_a =&gt; SDLK_A</li>
<li>SDLK_b =&gt; SDLK_B</li>
<li>SDLK_c =&gt; SDLK_C</li>
<li>SDLK_d =&gt; SDLK_D</li>
<li>SDLK_e =&gt; SDLK_E</li>
<li>SDLK_f =&gt; SDLK_F</li>
<li>SDLK_g =&gt; SDLK_G</li>
<li>SDLK_h =&gt; SDLK_H</li>
<li>SDLK_i =&gt; SDLK_I</li>
<li>SDLK_j =&gt; SDLK_J</li>
<li>SDLK_k =&gt; SDLK_K</li>
<li>SDLK_l =&gt; SDLK_L</li>
<li>SDLK_m =&gt; SDLK_M</li>
<li>SDLK_n =&gt; SDLK_N</li>
<li>SDLK_o =&gt; SDLK_O</li>
<li>SDLK_p =&gt; SDLK_P</li>
<li>SDLK_q =&gt; SDLK_Q</li>
<li>SDLK_r =&gt; SDLK_R</li>
<li>SDLK_s =&gt; SDLK_S</li>
<li>SDLK_t =&gt; SDLK_T</li>
<li>SDLK_u =&gt; SDLK_U</li>
<li>SDLK_v =&gt; SDLK_V</li>
<li>SDLK_w =&gt; SDLK_W</li>
<li>SDLK_x =&gt; SDLK_X</li>
<li>SDLK_y =&gt; SDLK_Y</li>
<li>SDLK_z =&gt; SDLK_Z</li>
</ul>
<h2 id="sdl_loadsoh">SDL_loadso.h</h2>
<p>Shared object handles are now <code>SDL_SharedObject *</code>, an
opaque type, instead of <code>void *</code>. This is just for
type-safety and there is no functional difference.</p>
<p>SDL_LoadFunction() now returns <code>SDL_FunctionPointer</code>
instead of <code>void *</code>, and should be cast to the appropriate
function type. You can define SDL_FUNCTION_POINTER_IS_VOID_POINTER in
your project to restore the previous behavior.</p>
<h2 id="sdl_logh">SDL_log.h</h2>
<p>SDL_Log() no longer prints a log prefix by default for
SDL_LOG_PRIORITY_INFO and below. The log prefixes can be customized with
SDL_SetLogPriorityPrefix().</p>
<p>The following macros have been removed:</p>
<ul>
<li>SDL_MAX_LOG_MESSAGE - there&#39;s no message length limit anymore. If
you need an artificial limit, this used to be 4096 in SDL versions
before 2.0.24.</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_LogGetOutputFunction() =&gt; SDL_GetLogOutputFunction()</li>
<li>SDL_LogGetPriority() =&gt; SDL_GetLogPriority()</li>
<li>SDL_LogResetPriorities() =&gt; SDL_ResetLogPriorities()</li>
<li>SDL_LogSetAllPriority() =&gt; SDL_SetLogPriorities()</li>
<li>SDL_LogSetOutputFunction() =&gt; SDL_SetLogOutputFunction()</li>
<li>SDL_LogSetPriority() =&gt; SDL_SetLogPriority()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_NUM_LOG_PRIORITIES =&gt; SDL_LOG_PRIORITY_COUNT</li>
</ul>
<h2 id="sdl_mainh">SDL_main.h</h2>
<p>SDL3 doesn&#39;t have a static libSDLmain to link against anymore.
Instead SDL_main.h is now a header-only library <strong>and not included
by SDL.h anymore</strong>.</p>
<p>Using it is really simple: Just
<code>#include &lt;SDL3/SDL_main.h&gt;</code> in the source file with
your standard <code>int main(int argc, char* argv[])</code> function.
See docs/README-main-functions.md for details.</p>
<p>Several platform-specific entry point functions have been removed as
unnecessary. If for some reason you explicitly need them, here are easy
replacements:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SDL_UIKitRunApp</span><span class="op">(</span><span class="pp">ARGC</span><span class="op">,</span><span class="pp"> ARGV</span><span class="op">,</span><span class="pp"> MAIN_FUNC</span><span class="op">)</span><span class="pp">  SDL_RunApp</span><span class="op">(</span><span class="pp">ARGC</span><span class="op">,</span><span class="pp"> ARGV</span><span class="op">,</span><span class="pp"> MAIN_FUNC</span><span class="op">,</span><span class="pp"> NULL</span><span class="op">)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SDL_GDKRunApp</span><span class="op">(</span><span class="pp">MAIN_FUNC</span><span class="op">,</span><span class="pp"> </span>RESERVED<span class="op">)</span><span class="pp">  SDL_RunApp</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="pp"> NULL</span><span class="op">,</span><span class="pp"> MAIN_FUNC</span><span class="op">,</span><span class="pp"> </span>RESERVED<span class="op">)</span></span></code></pre></div>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_WinRTRunApp() - WinRT support was removed in SDL3.</li>
</ul>
<h2 id="sdl_messageboxh">SDL_messagebox.h</h2>
<p>The buttonid field of SDL_MessageBoxButtonData has been renamed
buttonID.</p>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_MESSAGEBOX_COLOR_MAX =&gt; SDL_MESSAGEBOX_COLOR_COUNT</li>
</ul>
<h2 id="sdl_metalh">SDL_metal.h</h2>
<p>SDL_Metal_GetDrawableSize() has been removed.
SDL_GetWindowSizeInPixels() can be used in its place.</p>
<h2 id="sdl_mouseh">SDL_mouse.h</h2>
<p>SDL_ShowCursor() has been split into three functions:
SDL_ShowCursor(), SDL_HideCursor(), and SDL_CursorVisible()</p>
<p>SDL_GetMouseState(), SDL_GetGlobalMouseState(),
SDL_GetRelativeMouseState(), SDL_WarpMouseInWindow(), and
SDL_WarpMouseGlobal() all use floating point mouse positions, to provide
sub-pixel precision on platforms that support it.</p>
<p>SDL_SystemCursor&#39;s items from SDL2 have been renamed to match CSS
cursor names.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_FreeCursor() =&gt; SDL_DestroyCursor()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_SetRelativeMouseMode() - replaced with
SDL_SetWindowRelativeMouseMode()</li>
<li>SDL_GetRelativeMouseMode() - replaced with
SDL_GetWindowRelativeMouseMode()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_BUTTON =&gt; SDL_BUTTON_MASK</li>
<li>SDL_NUM_SYSTEM_CURSORS =&gt; SDL_SYSTEM_CURSOR_COUNT</li>
<li>SDL_SYSTEM_CURSOR_ARROW =&gt; SDL_SYSTEM_CURSOR_DEFAULT</li>
<li>SDL_SYSTEM_CURSOR_HAND =&gt; SDL_SYSTEM_CURSOR_POINTER</li>
<li>SDL_SYSTEM_CURSOR_IBEAM =&gt; SDL_SYSTEM_CURSOR_TEXT</li>
<li>SDL_SYSTEM_CURSOR_NO =&gt; SDL_SYSTEM_CURSOR_NOT_ALLOWED</li>
<li>SDL_SYSTEM_CURSOR_SIZEALL =&gt; SDL_SYSTEM_CURSOR_MOVE</li>
<li>SDL_SYSTEM_CURSOR_SIZENESW =&gt; SDL_SYSTEM_CURSOR_NESW_RESIZE</li>
<li>SDL_SYSTEM_CURSOR_SIZENS =&gt; SDL_SYSTEM_CURSOR_NS_RESIZE</li>
<li>SDL_SYSTEM_CURSOR_SIZENWSE =&gt; SDL_SYSTEM_CURSOR_NWSE_RESIZE</li>
<li>SDL_SYSTEM_CURSOR_SIZEWE =&gt; SDL_SYSTEM_CURSOR_EW_RESIZE</li>
<li>SDL_SYSTEM_CURSOR_WAITARROW =&gt; SDL_SYSTEM_CURSOR_PROGRESS</li>
</ul>
<h2 id="sdl_mutexh">SDL_mutex.h</h2>
<p>SDL_MUTEX_MAXWAIT has been removed; it suggested there was a maximum
timeout one could outlive, instead of an infinite wait. Instead, pass a
-1 to functions that accepted this symbol.</p>
<p>SDL_MUTEX_TIMEDOUT has been removed, the wait functions return true
if the operation succeeded or false if they timed out.</p>
<p>SDL_LockMutex(), SDL_UnlockMutex(), SDL_WaitSemaphore(),
SDL_SignalSemaphore(), SDL_WaitCondition(), SDL_SignalCondition(), and
SDL_BroadcastCondition() now return void; if the object is valid
(including being a NULL pointer, which returns immediately), these
functions never fail. If the object is invalid or the caller does
something illegal, like unlock another thread&#39;s mutex, this is
considered undefined behavior.</p>
<p>SDL_TryWaitSemaphore(), SDL_WaitSemaphoreTimeout(), and
SDL_WaitConditionTimeout() now return true if the operation succeeded or
false if they timed out.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_CondBroadcast() =&gt; SDL_BroadcastCondition()</li>
<li>SDL_CondSignal() =&gt; SDL_SignalCondition()</li>
<li>SDL_CondWait() =&gt; SDL_WaitCondition()</li>
<li>SDL_CondWaitTimeout() =&gt; SDL_WaitConditionTimeout(), returns
bool</li>
<li>SDL_CreateCond() =&gt; SDL_CreateCondition()</li>
<li>SDL_DestroyCond() =&gt; SDL_DestroyCondition()</li>
<li>SDL_SemPost() =&gt; SDL_SignalSemaphore()</li>
<li>SDL_SemTryWait() =&gt; SDL_TryWaitSemaphore(), returns bool</li>
<li>SDL_SemValue() =&gt; SDL_GetSemaphoreValue()</li>
<li>SDL_SemWait() =&gt; SDL_WaitSemaphore()</li>
<li>SDL_SemWaitTimeout() =&gt; SDL_WaitSemaphoreTimeout(), returns
bool</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_cond =&gt; SDL_Condition</li>
<li>SDL_mutex =&gt; SDL_Mutex</li>
<li>SDL_sem =&gt; SDL_Semaphore</li>
</ul>
<h2 id="sdl_pixelsh">SDL_pixels.h</h2>
<p>SDL_PixelFormat has been renamed SDL_PixelFormatDetails and just
describes the pixel format, it does not include a palette for indexed
pixel types.</p>
<p>SDL_PixelFormatEnum has been renamed SDL_PixelFormat and is used
instead of Uint32 for API functions that refer to pixel format by
enumerated value.</p>
<p>SDL_MapRGB(), SDL_MapRGBA(), SDL_GetRGB(), and SDL_GetRGBA() take an
optional palette parameter for indexed color lookups.</p>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>    SDL_GetRGBA<span class="op">(</span>pixel<span class="op">,</span> surface<span class="op">-&gt;</span>format<span class="op">,</span> <span class="op">&amp;</span>r<span class="op">,</span> <span class="op">&amp;</span>g<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">,</span> <span class="op">&amp;</span>a<span class="op">);</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>    SDL_GetRGBA<span class="op">(</span>pixel<span class="op">,</span> SDL_GetPixelFormatDetails<span class="op">(</span>surface<span class="op">-&gt;</span>format<span class="op">),</span> SDL_GetSurfacePalette<span class="op">(</span>surface<span class="op">),</span> <span class="op">&amp;</span>r<span class="op">,</span> <span class="op">&amp;</span>g<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">,</span> <span class="op">&amp;</span>a<span class="op">);</span></span></code></pre></div>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>    pixel <span class="op">=</span> SDL_MapRGBA<span class="op">(</span>surface<span class="op">-&gt;</span>format<span class="op">,</span> r<span class="op">,</span> g<span class="op">,</span> b<span class="op">,</span> a<span class="op">);</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>    pixel <span class="op">=</span> SDL_MapSurfaceRGBA<span class="op">(</span>surface<span class="op">,</span> r<span class="op">,</span> g<span class="op">,</span> b<span class="op">,</span> a<span class="op">);</span></span></code></pre></div>
<p>SDL_CalculateGammaRamp has been removed, because
SDL_SetWindowGammaRamp has been removed as well due to poor support in
modern operating systems (see <a href="#sdl_videoh">SDL_video.h</a>).</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_AllocFormat() =&gt; SDL_GetPixelFormatDetails()</li>
<li>SDL_AllocPalette() =&gt; SDL_CreatePalette()</li>
<li>SDL_FreePalette() =&gt; SDL_DestroyPalette()</li>
<li>SDL_MasksToPixelFormatEnum() =&gt; SDL_GetPixelFormatForMasks()</li>
<li>SDL_PixelFormatEnumToMasks() =&gt; SDL_GetMasksForPixelFormat(),
returns bool</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_PIXELFORMAT_BGR444 =&gt; SDL_PIXELFORMAT_XBGR4444</li>
<li>SDL_PIXELFORMAT_BGR555 =&gt; SDL_PIXELFORMAT_XBGR1555</li>
<li>SDL_PIXELFORMAT_BGR888 =&gt; SDL_PIXELFORMAT_XBGR8888</li>
<li>SDL_PIXELFORMAT_RGB444 =&gt; SDL_PIXELFORMAT_XRGB4444</li>
<li>SDL_PIXELFORMAT_RGB555 =&gt; SDL_PIXELFORMAT_XRGB1555</li>
<li>SDL_PIXELFORMAT_RGB888 =&gt; SDL_PIXELFORMAT_XRGB8888</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_FreeFormat()</li>
<li>SDL_SetPixelFormatPalette()</li>
<li>SDL_CalculateGammaRamp()</li>
</ul>
<p>The following macros have been removed:</p>
<ul>
<li>SDL_Colour - use SDL_Color instead</li>
</ul>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_PixelFormat =&gt; SDL_PixelFormatDetails</li>
</ul>
<h2 id="sdl_platformh">SDL_platform.h</h2>
<p>The following platform preprocessor macros have been renamed:</p>
<table>
<thead>
<tr class="header">
<th>SDL2</th>
<th>SDL3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>__3DS__</code></td>
<td><code>SDL_PLATFORM_3DS</code></td>
</tr>
<tr class="even">
<td><code>__AIX__</code></td>
<td><code>SDL_PLATFORM_AIX</code></td>
</tr>
<tr class="odd">
<td><code>__ANDROID__</code></td>
<td><code>SDL_PLATFORM_ANDROID</code></td>
</tr>
<tr class="even">
<td><code>__APPLE__</code></td>
<td><code>SDL_PLATFORM_APPLE</code></td>
</tr>
<tr class="odd">
<td><code>__BSDI__</code></td>
<td><code>SDL_PLATFORM_BSDI</code></td>
</tr>
<tr class="even">
<td><code>__CYGWIN_</code></td>
<td><code>SDL_PLATFORM_CYGWIN</code></td>
</tr>
<tr class="odd">
<td><code>__EMSCRIPTEN__</code></td>
<td><code>SDL_PLATFORM_EMSCRIPTEN</code></td>
</tr>
<tr class="even">
<td><code>__FREEBSD__</code></td>
<td><code>SDL_PLATFORM_FREEBSD</code></td>
</tr>
<tr class="odd">
<td><code>__GDK__</code></td>
<td><code>SDL_PLATFORM_GDK</code></td>
</tr>
<tr class="even">
<td><code>__HAIKU__</code></td>
<td><code>SDL_PLATFORM_HAIKU</code></td>
</tr>
<tr class="odd">
<td><code>__HPUX__</code></td>
<td><code>SDL_PLATFORM_HPUX</code></td>
</tr>
<tr class="even">
<td><code>__IPHONEOS__</code></td>
<td><code>SDL_PLATFORM_IOS</code></td>
</tr>
<tr class="odd">
<td><code>__IRIX__</code></td>
<td><code>SDL_PLATFORM_IRIX</code></td>
</tr>
<tr class="even">
<td><code>__LINUX__</code></td>
<td><code>SDL_PLATFORM_LINUX</code></td>
</tr>
<tr class="odd">
<td><code>__MACOSX__</code></td>
<td><code>SDL_PLATFORM_MACOS</code></td>
</tr>
<tr class="even">
<td><code>__NETBSD__</code></td>
<td><code>SDL_PLATFORM_NETBSD</code></td>
</tr>
<tr class="odd">
<td><code>__OPENBSD__</code></td>
<td><code>SDL_PLATFORM_OPENBSD</code></td>
</tr>
<tr class="even">
<td><code>__OS2__</code></td>
<td><code>SDL_PLATFORM_OS2</code></td>
</tr>
<tr class="odd">
<td><code>__OSF__</code></td>
<td><code>SDL_PLATFORM_OSF</code></td>
</tr>
<tr class="even">
<td><code>__PS2__</code></td>
<td><code>SDL_PLATFORM_PS2</code></td>
</tr>
<tr class="odd">
<td><code>__PSP__</code></td>
<td><code>SDL_PLATFORM_PSP</code></td>
</tr>
<tr class="even">
<td><code>__QNXNTO__</code></td>
<td><code>SDL_PLATFORM_QNXNTO</code></td>
</tr>
<tr class="odd">
<td><code>__RISCOS__</code></td>
<td><code>SDL_PLATFORM_RISCOS</code></td>
</tr>
<tr class="even">
<td><code>__SOLARIS__</code></td>
<td><code>SDL_PLATFORM_SOLARIS</code></td>
</tr>
<tr class="odd">
<td><code>__TVOS__</code></td>
<td><code>SDL_PLATFORM_TVOS</code></td>
</tr>
<tr class="even">
<td><code>__unix__</code></td>
<td><code>SDL_PLATFORM_UNI</code></td>
</tr>
<tr class="odd">
<td><code>__VITA__</code></td>
<td><code>SDL_PLATFORM_VITA</code></td>
</tr>
<tr class="even">
<td><code>__WIN32__</code></td>
<td><code>SDL_PLATFORM_WIN32</code></td>
</tr>
<tr class="odd">
<td><code>__WINGDK__</code></td>
<td><code>SDL_PLATFORM_WINGDK</code></td>
</tr>
<tr class="even">
<td><code>__XBOXONE__</code></td>
<td><code>SDL_PLATFORM_XBOXONE</code></td>
</tr>
<tr class="odd">
<td><code>__XBOXSERIES__</code></td>
<td><code>SDL_PLATFORM_XBOXSERIES</code></td>
</tr>
</tbody>
</table>
<p>You can use the Python script <a href="https://github.com/libsdl-org/SDL/blob/main/build-scripts/rename_macros.py">rename_macros.py</a>
to automatically rename these in your source code.</p>
<p>A new macro <code>SDL_PLATFORM_WINDOWS</code> has been added that is
true for all Windows platforms, including Xbox, GDK, etc.</p>
<p>The following platform preprocessor macros have been removed:</p>
<ul>
<li><code>__DREAMCAST__</code></li>
<li><code>__NACL__</code></li>
<li><code>__PNACL__</code></li>
<li><code>__WINDOWS__</code></li>
<li><code>__WINRT__</code></li>
</ul>
<h2 id="sdl_quith">SDL_quit.h</h2>
<p>SDL_quit.h has been completely removed. It only had one symbol in
it--SDL_QuitRequested--and if you want it, you can just add this to your
app...</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SDL_QuitRequested</span><span class="op">()</span><span class="pp"> </span><span class="op">(</span><span class="pp">SDL_PumpEvents</span><span class="op">(),</span><span class="pp"> </span><span class="op">(</span><span class="pp">SDL_PeepEvents</span><span class="op">(</span><span class="pp">NULL</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="pp">SDL_PEEKEVENT</span><span class="op">,</span><span class="pp">SDL_EVENT_QUIT</span><span class="op">,</span><span class="pp">SDL_EVENT_QUIT</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;</span><span class="pp"> </span><span class="dv">0</span><span class="op">))</span></span></code></pre></div>
<p>...but this macro is sort of messy, calling two functions in sequence
in an expression.</p>
<p>The following macros have been removed:</p>
<ul>
<li>SDL_QuitRequested - call SDL_PumpEvents() then SDL_PeepEvents()
directly, instead.</li>
</ul>
<h2 id="sdl_recth">SDL_rect.h</h2>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_EncloseFPoints() =&gt; SDL_GetRectEnclosingPointsFloat()</li>
<li>SDL_EnclosePoints() =&gt; SDL_GetRectEnclosingPoints()</li>
<li>SDL_FRectEmpty() =&gt; SDL_RectEmptyFloat()</li>
<li>SDL_FRectEquals() =&gt; SDL_RectsEqualFloat()</li>
<li>SDL_FRectEqualsEpsilon() =&gt; SDL_RectsEqualEpsilon()</li>
<li>SDL_HasIntersection() =&gt; SDL_HasRectIntersection()</li>
<li>SDL_HasIntersectionF() =&gt; SDL_HasRectIntersectionFloat()</li>
<li>SDL_IntersectFRect() =&gt; SDL_GetRectIntersectionFloat()</li>
<li>SDL_IntersectFRectAndLine() =&gt;
SDL_GetRectAndLineIntersectionFloat()</li>
<li>SDL_IntersectRect() =&gt; SDL_GetRectIntersection()</li>
<li>SDL_IntersectRectAndLine() =&gt;
SDL_GetRectAndLineIntersection()</li>
<li>SDL_PointInFRect() =&gt; SDL_PointInRectFloat()</li>
<li>SDL_RectEquals() =&gt; SDL_RectsEqual()</li>
<li>SDL_UnionFRect() =&gt; SDL_GetRectUnionFloat(), returns bool</li>
<li>SDL_UnionRect() =&gt; SDL_GetRectUnion(), returns bool</li>
</ul>
<h2 id="sdl_renderh">SDL_render.h</h2>
<p>The 2D renderer API always uses batching in SDL3. There is no magic
to turn it on and off; it doesn&#39;t matter if you select a specific
renderer or try to use any hint. This means that all apps that use
SDL3&#39;s 2D renderer and also want to call directly into the platform&#39;s
lower-layer graphics API <em>must</em> call SDL_FlushRenderer() before
doing so. This will make sure any pending rendering work from SDL is
done before the app starts directly drawing.</p>
<p>SDL_GetRenderDriverInfo() has been removed, since most of the
information it reported were estimates and could not be accurate before
creating a renderer. Often times this function was used to figure out
the index of a driver, so one would call it in a for-loop, looking for
the driver named &quot;opengl&quot; or whatnot. SDL_GetRenderDriver() has been
added for this functionality, which returns only the name of the
driver.</p>
<p>SDL_CreateRenderer()&#39;s second argument is no longer an integer index,
but a <code>const char *</code> representing a renderer&#39;s name; if you
were just using a for-loop to find which index is the &quot;opengl&quot; or
whatnot driver, you can just pass that string directly here, now.
Passing NULL is the same as passing -1 here in SDL2, to signify you want
SDL to decide for you.</p>
<p>SDL_CreateRenderer()&#39;s flags parameter has been removed. See specific
flags below for how to achieve the same functionality in SDL 3.0.</p>
<p>SDL_CreateWindowAndRenderer() now takes the window title as the first
parameter.</p>
<p>SDL_GetRendererInfo() has been removed. The name of a renderer can be
retrieved using SDL_GetRendererName(), and the other information is
available as properties on the renderer.</p>
<p>Textures are created with SDL_SCALEMODE_LINEAR by default, and use
SDL_BLENDMODE_BLEND by default if they are created with a format that
has an alpha channel.</p>
<p>SDL_QueryTexture() has been removed. The properties of the texture
can be queried using SDL_PROP_TEXTURE_FORMAT_NUMBER,
SDL_PROP_TEXTURE_ACCESS_NUMBER, SDL_PROP_TEXTURE_WIDTH_NUMBER, and
SDL_PROP_TEXTURE_HEIGHT_NUMBER. A function SDL_GetTextureSize() has been
added to get the size of the texture as floating point values.</p>
<p>Mouse and touch events are no longer filtered to change their
coordinates, instead you can call SDL_ConvertEventToRenderCoordinates()
to explicitly map event coordinates into the rendering viewport.</p>
<p>SDL_RenderWindowToLogical() and SDL_RenderLogicalToWindow() have been
renamed SDL_RenderCoordinatesFromWindow() and
SDL_RenderCoordinatesToWindow() and take floating point coordinates in
both directions.</p>
<p>The viewport, clipping state, and scale for render targets are now
persistent and will remain set whenever they are active.</p>
<p>SDL_Vertex has been changed to use floating point colors, in the
range of [0..1] for SDR content.</p>
<p>SDL_RenderReadPixels() returns a surface instead of filling in
preallocated memory.</p>
<p>SDL_RenderSetLogicalSize() (now called
SDL_SetRenderLogicalPresentation()) in SDL2 would modify the scaling and
viewport state. In SDL3, logical presentation maintains its state
separately, so the app can use its own viewport and scaling while also
setting a logical size.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_GetRendererOutputSize() =&gt; SDL_GetCurrentRenderOutputSize(),
returns bool</li>
<li>SDL_RenderCopy() =&gt; SDL_RenderTexture(), returns bool</li>
<li>SDL_RenderCopyEx() =&gt; SDL_RenderTextureRotated(), returns
bool</li>
<li>SDL_RenderCopyExF() =&gt; SDL_RenderTextureRotated(), returns
bool</li>
<li>SDL_RenderCopyF() =&gt; SDL_RenderTexture(), returns bool</li>
<li>SDL_RenderDrawLine() =&gt; SDL_RenderLine(), returns bool</li>
<li>SDL_RenderDrawLineF() =&gt; SDL_RenderLine(), returns bool</li>
<li>SDL_RenderDrawLines() =&gt; SDL_RenderLines(), returns bool</li>
<li>SDL_RenderDrawLinesF() =&gt; SDL_RenderLines(), returns bool</li>
<li>SDL_RenderDrawPoint() =&gt; SDL_RenderPoint(), returns bool</li>
<li>SDL_RenderDrawPointF() =&gt; SDL_RenderPoint(), returns bool</li>
<li>SDL_RenderDrawPoints() =&gt; SDL_RenderPoints(), returns bool</li>
<li>SDL_RenderDrawPointsF() =&gt; SDL_RenderPoints(), returns bool</li>
<li>SDL_RenderDrawRect() =&gt; SDL_RenderRect(), returns bool</li>
<li>SDL_RenderDrawRectF() =&gt; SDL_RenderRect(), returns bool</li>
<li>SDL_RenderDrawRects() =&gt; SDL_RenderRects(), returns bool</li>
<li>SDL_RenderDrawRectsF() =&gt; SDL_RenderRects(), returns bool</li>
<li>SDL_RenderFillRectF() =&gt; SDL_RenderFillRect(), returns bool</li>
<li>SDL_RenderFillRectsF() =&gt; SDL_RenderFillRects(), returns
bool</li>
<li>SDL_RenderFlush() =&gt; SDL_FlushRenderer(), returns bool</li>
<li>SDL_RenderGetClipRect() =&gt; SDL_GetRenderClipRect(), returns
bool</li>
<li>SDL_RenderGetIntegerScale() =&gt; SDL_GetRenderIntegerScale()</li>
<li>SDL_RenderGetLogicalSize() =&gt; SDL_GetRenderLogicalPresentation(),
returns bool</li>
<li>SDL_RenderGetMetalCommandEncoder() =&gt;
SDL_GetRenderMetalCommandEncoder()</li>
<li>SDL_RenderGetMetalLayer() =&gt; SDL_GetRenderMetalLayer()</li>
<li>SDL_RenderGetScale() =&gt; SDL_GetRenderScale(), returns bool</li>
<li>SDL_RenderGetViewport() =&gt; SDL_GetRenderViewport(), returns
bool</li>
<li>SDL_RenderGetWindow() =&gt; SDL_GetRenderWindow()</li>
<li>SDL_RenderIsClipEnabled() =&gt; SDL_RenderClipEnabled()</li>
<li>SDL_RenderLogicalToWindow() =&gt; SDL_RenderCoordinatesToWindow(),
returns bool</li>
<li>SDL_RenderSetClipRect() =&gt; SDL_SetRenderClipRect(), returns
bool</li>
<li>SDL_RenderSetLogicalSize() =&gt; SDL_SetRenderLogicalPresentation(),
returns bool</li>
<li>SDL_RenderSetScale() =&gt; SDL_SetRenderScale(), returns bool</li>
<li>SDL_RenderSetVSync() =&gt; SDL_SetRenderVSync(), returns bool</li>
<li>SDL_RenderSetViewport() =&gt; SDL_SetRenderViewport(), returns
bool</li>
<li>SDL_RenderWindowToLogical() =&gt; SDL_RenderCoordinatesFromWindow(),
returns bool</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GL_BindTexture() - use SDL_GetTextureProperties() to get the
OpenGL texture ID and bind the texture directly</li>
<li>SDL_GL_UnbindTexture() - use SDL_GetTextureProperties() to get the
OpenGL texture ID and unbind the texture directly</li>
<li>SDL_GetTextureUserData() - use SDL_GetTextureProperties()
instead</li>
<li>SDL_RenderGetIntegerScale()</li>
<li>SDL_RenderSetIntegerScale() - this is now explicit with
SDL_LOGICAL_PRESENTATION_INTEGER_SCALE</li>
<li>SDL_RenderTargetSupported() - render targets are always
supported</li>
<li>SDL_SetTextureUserData() - use SDL_GetTextureProperties()
instead</li>
</ul>
<p>The following enums have been renamed:</p>
<ul>
<li>SDL_RendererFlip =&gt; SDL_FlipMode - moved to SDL_surface.h</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_ScaleModeLinear =&gt; SDL_SCALEMODE_LINEAR</li>
<li>SDL_ScaleModeNearest =&gt; SDL_SCALEMODE_NEAREST</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_RENDERER_ACCELERATED - all renderers except
<code>SDL_SOFTWARE_RENDERER</code> are accelerated</li>
<li>SDL_RENDERER_PRESENTVSYNC - replaced with
SDL_PROP_RENDERER_CREATE_PRESENT_VSYNC_NUMBER during renderer creation
and SDL_PROP_RENDERER_VSYNC_NUMBER after renderer creation</li>
<li>SDL_RENDERER_SOFTWARE - you can check whether the name of the
renderer is <code>SDL_SOFTWARE_RENDERER</code></li>
<li>SDL_RENDERER_TARGETTEXTURE - all renderers support target texture
functionality</li>
<li>SDL_ScaleModeBest - use SDL_SCALEMODE_LINEAR instead</li>
</ul>
<h2 id="sdl_rwopsh">SDL_rwops.h</h2>
<p>The following symbols have been renamed:</p>
<ul>
<li>RW_SEEK_CUR =&gt; SDL_IO_SEEK_CUR</li>
<li>RW_SEEK_END =&gt; SDL_IO_SEEK_END</li>
<li>RW_SEEK_SET =&gt; SDL_IO_SEEK_SET</li>
</ul>
<p>SDL_rwops.h is now named SDL_iostream.h</p>
<p>SDL_RWops is now an opaque structure, and has been renamed to
SDL_IOStream. The SDL3 APIs to create an SDL_IOStream (SDL_IOFromFile,
etc) are renamed but otherwise still function as they did in SDL2.
However, to make a custom SDL_IOStream with app-provided function
pointers, call SDL_OpenIO and provide the function pointers through
there. To call into an SDL_IOStream&#39;s functionality, use the standard
APIs (SDL_ReadIO, etc), as the function pointers are internal.</p>
<p>SDL_IOStream is not to be confused with the unrelated standard C++
iostream class!</p>
<p>The RWops function pointers are now in a separate structure called
SDL_IOStreamInterface, which is provided to SDL_OpenIO when creating a
custom SDL_IOStream implementation. All the functions now take a
<code>void *</code> userdata argument for their first parameter instead
of an SDL_IOStream, since that&#39;s now an opaque structure.</p>
<p>SDL_RWread and SDL_RWwrite (and the read and write function pointers)
have a different function signature in SDL3, in addition to being
renamed.</p>
<p>Previously they looked more like stdio:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> SDL_RWread<span class="op">(</span>SDL_RWops <span class="op">*</span>context<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> <span class="dt">size_t</span> maxnum<span class="op">);</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> SDL_RWwrite<span class="op">(</span>SDL_RWops <span class="op">*</span>context<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> <span class="dt">size_t</span> maxnum<span class="op">);</span></span></code></pre></div>
<p>But now they look more like POSIX:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> SDL_ReadIO<span class="op">(</span>SDL_IOStream <span class="op">*</span>context<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">);</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> SDL_WriteIO<span class="op">(</span>SDL_IOStream <span class="op">*</span>context<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">);</span></span></code></pre></div>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> custom_read<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> <span class="dt">size_t</span> nitems<span class="op">,</span> SDL_RWops <span class="op">*</span>stream<span class="op">)</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_RWread<span class="op">(</span>stream<span class="op">,</span> ptr<span class="op">,</span> size<span class="op">,</span> nitems<span class="op">);</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> custom_read<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> <span class="dt">size_t</span> nitems<span class="op">,</span> SDL_IOStream <span class="op">*</span>stream<span class="op">)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> nitems <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> SDL_ReadIO<span class="op">(</span>stream<span class="op">,</span> ptr<span class="op">,</span> size <span class="op">*</span> nitems<span class="op">)</span> <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_RWops::type was removed; it wasn&#39;t meaningful for app-provided
implementations at all, and wasn&#39;t much use for SDL&#39;s internal
implementations, either. If you <em>have</em> to identify the type, you
can examine the SDL_IOStream&#39;s properties to detect built-in
implementations.</p>
<p>SDL_IOStreamInterface::close implementations should clean up their
own userdata, but not call SDL_CloseIO on themselves; now the contract
is always that SDL_CloseIO is called, which calls
<code>-&gt;close</code> before freeing the opaque object.</p>
<p>SDL_AllocRW(), SDL_FreeRW(), SDL_RWclose() and direct access to the
<code>-&gt;close</code> function pointer have been removed from the API,
so there&#39;s only one path to manage RWops lifetimes now: SDL_OpenIO() and
SDL_CloseIO().</p>
<p>SDL_RWFromFP has been removed from the API, due to issues when the
SDL library uses a different C runtime from the application.</p>
<p>You can implement this in your own code easily:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> IOStreamStdioFPData</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> autoclose<span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> IOStreamStdioFPData<span class="op">;</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> Sint64 SDLCALL stdio_seek<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> Sint64 offset<span class="op">,</span> <span class="dt">int</span> whence<span class="op">)</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp <span class="op">=</span> <span class="op">((</span>IOStreamStdioFPData <span class="op">*)</span> userdata<span class="op">)-&gt;</span>fp<span class="op">;</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> stdiowhence<span class="op">;</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>whence<span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> SDL_IO_SEEK_SET<span class="op">:</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>        stdiowhence <span class="op">=</span> SEEK_SET<span class="op">;</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> SDL_IO_SEEK_CUR<span class="op">:</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>        stdiowhence <span class="op">=</span> SEEK_CUR<span class="op">;</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> SDL_IO_SEEK_END<span class="op">:</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>        stdiowhence <span class="op">=</span> SEEK_END<span class="op">;</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>        SDL_SetError<span class="op">(</span><span class="st">&quot;Unknown value for &#39;whence&#39;&quot;</span><span class="op">);</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fseek<span class="op">(</span>fp<span class="op">,</span> <span class="op">(</span>fseek_off_t<span class="op">)</span>offset<span class="op">,</span> stdiowhence<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">const</span> Sint64 pos <span class="op">=</span> ftell<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pos <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>            SDL_SetError<span class="op">(</span><span class="st">&quot;Couldn&#39;t get stream offset&quot;</span><span class="op">);</span></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pos<span class="op">;</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>    SDL_SetError<span class="op">(</span><span class="st">&quot;Couldn&#39;t seek in stream&quot;</span><span class="op">);</span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">size_t</span> SDLCALL stdio_read<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> SDL_IOStatus <span class="op">*</span>status<span class="op">)</span></span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp <span class="op">=</span> <span class="op">((</span>IOStreamStdioFPData <span class="op">*)</span> userdata<span class="op">)-&gt;</span>fp<span class="op">;</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">size_t</span> bytes <span class="op">=</span> fread<span class="op">(</span>ptr<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> size<span class="op">,</span> fp<span class="op">);</span></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>bytes <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> ferror<span class="op">(</span>fp<span class="op">))</span> <span class="op">{</span></span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>        SDL_SetError<span class="op">(</span><span class="st">&quot;Couldn&#39;t read stream&quot;</span><span class="op">);</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bytes<span class="op">;</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">size_t</span> SDLCALL stdio_write<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> SDL_IOStatus <span class="op">*</span>status<span class="op">)</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp <span class="op">=</span> <span class="op">((</span>IOStreamStdioFPData <span class="op">*)</span> userdata<span class="op">)-&gt;</span>fp<span class="op">;</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">size_t</span> bytes <span class="op">=</span> fwrite<span class="op">(</span>ptr<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> size<span class="op">,</span> fp<span class="op">);</span></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>bytes <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> ferror<span class="op">(</span>fp<span class="op">))</span> <span class="op">{</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>        SDL_SetError<span class="op">(</span><span class="st">&quot;Couldn&#39;t write stream&quot;</span><span class="op">);</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bytes<span class="op">;</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">bool</span> SDLCALL stdio_close<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">)</span></span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>    IOStreamStdioData <span class="op">*</span>rwopsdata <span class="op">=</span> <span class="op">(</span>IOStreamStdioData <span class="op">*)</span> userdata<span class="op">;</span></span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> status <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>rwopsdata<span class="op">-&gt;</span>autoclose<span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>fclose<span class="op">(</span>rwopsdata<span class="op">-&gt;</span>fp<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>            SDL_SetError<span class="op">(</span><span class="st">&quot;Couldn&#39;t close stream&quot;</span><span class="op">);</span></span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>            status <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> status<span class="op">;</span></span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>SDL_IOStream <span class="op">*</span>SDL_RWFromFP<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">,</span> <span class="dt">bool</span> autoclose<span class="op">)</span></span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>    SDL_IOStreamInterface iface<span class="op">;</span></span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>    IOStreamStdioFPData <span class="op">*</span>rwopsdata<span class="op">;</span></span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a>    SDL_IOStream <span class="op">*</span>rwops<span class="op">;</span></span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>    rwopsdata <span class="op">=</span> <span class="op">(</span>IOStreamStdioFPData <span class="op">*)</span> SDL_malloc<span class="op">(</span><span class="kw">sizeof</span> <span class="op">(*</span>rwopsdata<span class="op">));</span></span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>rwopsdata<span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a>    SDL_INIT_INTERFACE<span class="op">(&amp;</span>iface<span class="op">);</span></span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* There&#39;s no stdio_size because SDL_GetIOSize emulates it the same way we&#39;d do it for stdio anyhow. */</span></span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a>    iface<span class="op">.</span>seek <span class="op">=</span> stdio_seek<span class="op">;</span></span>
<span id="cb37-88"><a href="#cb37-88" aria-hidden="true" tabindex="-1"></a>    iface<span class="op">.</span>read <span class="op">=</span> stdio_read<span class="op">;</span></span>
<span id="cb37-89"><a href="#cb37-89" aria-hidden="true" tabindex="-1"></a>    iface<span class="op">.</span>write <span class="op">=</span> stdio_write<span class="op">;</span></span>
<span id="cb37-90"><a href="#cb37-90" aria-hidden="true" tabindex="-1"></a>    iface<span class="op">.</span>close <span class="op">=</span> stdio_close<span class="op">;</span></span>
<span id="cb37-91"><a href="#cb37-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-92"><a href="#cb37-92" aria-hidden="true" tabindex="-1"></a>    rwopsdata<span class="op">-&gt;</span>fp <span class="op">=</span> fp<span class="op">;</span></span>
<span id="cb37-93"><a href="#cb37-93" aria-hidden="true" tabindex="-1"></a>    rwopsdata<span class="op">-&gt;</span>autoclose <span class="op">=</span> autoclose<span class="op">;</span></span>
<span id="cb37-94"><a href="#cb37-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-95"><a href="#cb37-95" aria-hidden="true" tabindex="-1"></a>    rwops <span class="op">=</span> SDL_OpenIO<span class="op">(&amp;</span>iface<span class="op">,</span> rwopsdata<span class="op">);</span></span>
<span id="cb37-96"><a href="#cb37-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>rwops<span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-97"><a href="#cb37-97" aria-hidden="true" tabindex="-1"></a>        iface<span class="op">.</span>close<span class="op">(</span>rwopsdata<span class="op">);</span></span>
<span id="cb37-98"><a href="#cb37-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-99"><a href="#cb37-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rwops<span class="op">;</span></span>
<span id="cb37-100"><a href="#cb37-100" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The internal <code>FILE *</code> is available through a standard
SDL_IOStream property, for streams made through SDL_IOFromFile() that
use stdio behind the scenes; apps use this pointer at their own risk and
should make sure that SDL and the app are using the same C runtime.</p>
<p>On Apple platforms, SDL_RWFromFile (now called SDL_IOFromFile) no
longer tries to read from inside the app bundle&#39;s resource directory,
instead now using the specified path unchanged. One can use
SDL_GetBasePath() to find the resource directory on these platforms.</p>
<p>The functions SDL_ReadU8(), SDL_ReadU16LE(), SDL_ReadU16BE(),
SDL_ReadU32LE(), SDL_ReadU32BE(), SDL_ReadU64LE(), and SDL_ReadU64BE()
now return true if the read succeeded and false if it didn&#39;t, and store
the data in a pointer passed in as a parameter.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_RWFromConstMem() =&gt; SDL_IOFromConstMem()</li>
<li>SDL_RWFromFile() =&gt; SDL_IOFromFile()</li>
<li>SDL_RWFromMem() =&gt; SDL_IOFromMem()</li>
<li>SDL_RWclose() =&gt; SDL_CloseIO(), returns bool</li>
<li>SDL_RWread() =&gt; SDL_ReadIO()</li>
<li>SDL_RWseek() =&gt; SDL_SeekIO()</li>
<li>SDL_RWsize() =&gt; SDL_GetIOSize()</li>
<li>SDL_RWtell() =&gt; SDL_TellIO()</li>
<li>SDL_RWwrite() =&gt; SDL_WriteIO()</li>
<li>SDL_ReadBE16() =&gt; SDL_ReadU16BE()</li>
<li>SDL_ReadBE32() =&gt; SDL_ReadU32BE()</li>
<li>SDL_ReadBE64() =&gt; SDL_ReadU64BE()</li>
<li>SDL_ReadLE16() =&gt; SDL_ReadU16LE()</li>
<li>SDL_ReadLE32() =&gt; SDL_ReadU32LE()</li>
<li>SDL_ReadLE64() =&gt; SDL_ReadU64LE()</li>
<li>SDL_WriteBE16() =&gt; SDL_WriteU16BE()</li>
<li>SDL_WriteBE32() =&gt; SDL_WriteU32BE()</li>
<li>SDL_WriteBE64() =&gt; SDL_WriteU64BE()</li>
<li>SDL_WriteLE16() =&gt; SDL_WriteU16LE()</li>
<li>SDL_WriteLE32() =&gt; SDL_WriteU32LE()</li>
<li>SDL_WriteLE64() =&gt; SDL_WriteU64LE()</li>
</ul>
<p>The following structures have been renamed:</p>
<ul>
<li>SDL_RWops =&gt; SDL_IOStream</li>
</ul>
<h2 id="sdl_scancodeh">SDL_scancode.h</h2>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_SCANCODE_WWW</li>
<li>SDL_SCANCODE_MAIL</li>
<li>SDL_SCANCODE_CALCULATOR</li>
<li>SDL_SCANCODE_COMPUTER</li>
<li>SDL_SCANCODE_BRIGHTNESSDOWN</li>
<li>SDL_SCANCODE_BRIGHTNESSUP</li>
<li>SDL_SCANCODE_DISPLAYSWITCH</li>
<li>SDL_SCANCODE_KBDILLUMTOGGLE</li>
<li>SDL_SCANCODE_KBDILLUMDOWN</li>
<li>SDL_SCANCODE_KBDILLUMUP</li>
<li>SDL_SCANCODE_APP1</li>
<li>SDL_SCANCODE_APP2</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_NUM_SCANCODES =&gt; SDL_SCANCODE_COUNT</li>
<li>SDL_SCANCODE_AUDIOFASTFORWARD =&gt;
SDL_SCANCODE_MEDIA_FAST_FORWARD</li>
<li>SDL_SCANCODE_AUDIOMUTE =&gt; SDL_SCANCODE_MUTE</li>
<li>SDL_SCANCODE_AUDIONEXT =&gt; SDL_SCANCODE_MEDIA_NEXT_TRACK</li>
<li>SDL_SCANCODE_AUDIOPLAY =&gt; SDL_SCANCODE_MEDIA_PLAY</li>
<li>SDL_SCANCODE_AUDIOPREV =&gt; SDL_SCANCODE_MEDIA_PREVIOUS_TRACK</li>
<li>SDL_SCANCODE_AUDIOREWIND =&gt; SDL_SCANCODE_MEDIA_REWIND</li>
<li>SDL_SCANCODE_AUDIOSTOP =&gt; SDL_SCANCODE_MEDIA_STOP</li>
<li>SDL_SCANCODE_EJECT =&gt; SDL_SCANCODE_MEDIA_EJECT</li>
<li>SDL_SCANCODE_MEDIASELECT =&gt; SDL_SCANCODE_MEDIA_SELECT</li>
</ul>
<h2 id="sdl_sensorh">SDL_sensor.h</h2>
<p>SDL_SensorID has changed from Sint32 to Uint32, with an invalid ID
being 0.</p>
<p>Rather than iterating over sensors using device index, there is a new
function SDL_GetSensors() to get the current list of sensors, and new
functions to get information about sensors from their instance ID:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_InitSubSystem<span class="op">(</span>SDL_INIT_SENSOR<span class="op">))</span> <span class="op">{</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">,</span> num_sensors<span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>        SDL_SensorID <span class="op">*</span>sensors <span class="op">=</span> SDL_GetSensors<span class="op">(&amp;</span>num_sensors<span class="op">);</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sensors<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_sensors<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>                SDL_Log<span class="op">(</span><span class="st">&quot;Sensor %&quot;</span> SDL_PRIu32 <span class="st">&quot;: </span><span class="sc">%s</span><span class="st">, type </span><span class="sc">%d</span><span class="st">, platform type </span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                        sensors<span class="op">[</span>i<span class="op">],</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                        SDL_GetSensorNameForID<span class="op">(</span>sensors<span class="op">[</span>i<span class="op">]),</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                        SDL_GetSensorTypeForID<span class="op">(</span>sensors<span class="op">[</span>i<span class="op">]),</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>                        SDL_GetSensorNonPortableTypeForID<span class="op">(</span>sensors<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>            SDL_free<span class="op">(</span>sensors<span class="op">);</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>        SDL_QuitSubSystem<span class="op">(</span>SDL_INIT_SENSOR<span class="op">);</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Removed SDL_SensorGetDataWithTimestamp(), if you want timestamps for
the sensor data, you should use the sensor_timestamp member of
SDL_EVENT_SENSOR_UPDATE events.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_SensorClose() =&gt; SDL_CloseSensor()</li>
<li>SDL_SensorFromInstanceID() =&gt; SDL_GetSensorFromID()</li>
<li>SDL_SensorGetData() =&gt; SDL_GetSensorData(), returns bool</li>
<li>SDL_SensorGetInstanceID() =&gt; SDL_GetSensorID()</li>
<li>SDL_SensorGetName() =&gt; SDL_GetSensorName()</li>
<li>SDL_SensorGetNonPortableType() =&gt;
SDL_GetSensorNonPortableType()</li>
<li>SDL_SensorGetType() =&gt; SDL_GetSensorType()</li>
<li>SDL_SensorOpen() =&gt; SDL_OpenSensor()</li>
<li>SDL_SensorUpdate() =&gt; SDL_UpdateSensors()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_LockSensors()</li>
<li>SDL_NumSensors() - replaced with SDL_GetSensors()</li>
<li>SDL_SensorGetDeviceInstanceID()</li>
<li>SDL_SensorGetDeviceName() - replaced with
SDL_GetSensorNameForID()</li>
<li>SDL_SensorGetDeviceNonPortableType() - replaced with
SDL_GetSensorNonPortableTypeForID()</li>
<li>SDL_SensorGetDeviceType() - replaced with
SDL_GetSensorTypeForID()</li>
<li>SDL_UnlockSensors()</li>
</ul>
<h2 id="sdl_shapeh">SDL_shape.h</h2>
<p>This header has been removed and a simplified version of this API has
been added as SDL_SetWindowShape() in SDL_video.h. See test/testshape.c
for an example.</p>
<h2 id="sdl_stdinch">SDL_stdinc.h</h2>
<p>The standard C headers like stdio.h and stdlib.h are no longer
included, you should include them directly in your project if you use
non-SDL C runtime functions. M_PI is no longer defined in SDL_stdinc.h,
you can use the new symbols SDL_PI_D (double) and SDL_PI_F (float)
instead.</p>
<p>bool is now defined as bool, and is 1 byte instead of the size of an
int.</p>
<p>SDL3 attempts to apply consistency to case-insensitive string
functions. In SDL2, things like SDL_strcasecmp() would usually only work
on English letters, and depending on the user&#39;s locale, possibly not
even those. In SDL3, consistency is applied:</p>
<ul>
<li>Many things that don&#39;t care about case-insensitivity, like
SDL_strcmp(), continue to work with any null-terminated string of bytes,
even if it happens to be malformed UTF-8.</li>
<li>SDL_strcasecmp() expects valid UTF-8 strings, and will attempt to
support <em>most</em> Unicode characters with a technique known as
&quot;case-folding,&quot; which is to say it can match &#39;A&#39; and &#39;a&#39;, and also &#39;Η&#39;
and &#39;η&#39;, but ALSO &#39;ß&#39; and &quot;ss&quot;. This is <em>probably</em> how most apps
assumed it worked in SDL2 and won&#39;t need any changes.</li>
<li>SDL_strncasecmp() works the same, but the third parameter takes
<em>bytes</em>, as before, so SDL_strlen() can continue to be used with
it. If a string hits the limit in the middle of a codepoint, the
half-processed bytes of the codepoint will be treated as a collection of
U+0xFFFD (REPLACEMENT CHARACTER) codepoints, which you probably don&#39;t
want.</li>
<li>SDL_wcscasecmp() and SDL_wcsncasecmp() work the same way but operate
on UTF-16 or UTF-32 encoded strings, depending on what the platform
considers &quot;wchar_t&quot; to be. SDL_wcsncasecmp&#39;s third parameter is number
of wchar_t values, not bytes, but UTF-16 has the same concerns as UTF-8
for variable-length codepoints.</li>
<li>SDL_strcasestr() expects valid UTF-8 strings, and will compare
codepoints using case-folding.</li>
<li>SDL_tolower() and SDL_toupper() continue to only work on single
bytes (even though the parameter is an <code>int</code>) and
<em>only</em> converts low-ASCII English A through Z.</li>
<li>SDL_strlwr() and SDL_strupr() operates on individual bytes (not
UTF-8 codepoints) and only change low-ASCII English &#39;A&#39; through &#39;Z&#39;.
These functions do not check the string for valid UTF-8 encoding.</li>
<li>The ctype.h replacement SDL_is*() functions (SDL_isalpha,
SDL_isdigit, etc) only work on low-ASCII characters and ignore user
locale, assuming English. This makes these functions consistent in SDL3,
but applications need to be careful to understand their limits.</li>
</ul>
<p>Please note that the case-folding technique used by SDL3 will not
produce correct results for the &quot;Turkish &#39;I&#39;&quot;; this one letter is a
surprisingly hard problem in the Unicode world, and since these
functions do not specify the human language in use, we have chosen to
ignore this problem.</p>
<p>SDL_strtoll(), SDL_strtoull(), SDL_lltoa(), and SDL_ulltoa() use long
long values instead of 64-bit values, to match their C runtime
counterparts.</p>
<p>SDL_setenv() is not thread-safe and has been renamed
SDL_setenv_unsafe().</p>
<p>The following macros have been removed:</p>
<ul>
<li>SDL_TABLESIZE() - use SDL_arraysize() instead</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_size_add_overflow() =&gt; SDL_size_add_check_overflow(), returns
bool</li>
<li>SDL_size_mul_overflow() =&gt; SDL_size_mul_check_overflow(), returns
bool</li>
<li>SDL_strtokr() =&gt; SDL_strtok_r()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_memcpy4()</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_FALSE =&gt; false</li>
<li>SDL_TRUE =&gt; true</li>
<li>SDL_bool =&gt; bool</li>
</ul>
<h2 id="sdl_surfaceh">SDL_surface.h</h2>
<p>SDL_Surface has been simplified and internal details are no longer in
the public structure.</p>
<p>The <code>format</code> member of SDL_Surface is now an enumerated
pixel format value. You can get the full details of the pixel format by
calling <code>SDL_GetPixelFormatDetails(surface-&gt;format)</code>. You
can get the palette associated with the surface by calling
SDL_GetSurfacePalette(). You can get the clip rectangle by calling
SDL_GetSurfaceClipRect().</p>
<p>The userdata member of SDL_Surface has been replaced with a more
general properties interface, which can be queried with
SDL_GetSurfaceProperties()</p>
<p>Indexed format surfaces no longer have a palette by default. Surfaces
without a palette will copy the pixels untranslated between
surfaces.</p>
<p>Code that used to look like this:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>    SDL_Surface <span class="op">*</span>surface <span class="op">=</span> SDL_CreateRGBSurfaceWithFormat<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> SDL_PIXELFORMAT_INDEX8<span class="op">);</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    SDL_Palette <span class="op">*</span>palette <span class="op">=</span> surface<span class="op">-&gt;</span>format<span class="op">-&gt;</span>palette<span class="op">;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span></code></pre></div>
<p>should be changed to:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>    SDL_Surface <span class="op">*</span>surface <span class="op">=</span> SDL_CreateSurface<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> SDL_PIXELFORMAT_INDEX8<span class="op">);</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    SDL_Palette <span class="op">*</span>palette <span class="op">=</span> SDL_CreateSurfacePalette<span class="op">(</span>surface<span class="op">);</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span></code></pre></div>
<p>Removed the unused &#39;flags&#39; parameter from SDL_ConvertSurface.</p>
<p>SDL_CreateRGBSurface() and SDL_CreateRGBSurfaceWithFormat() have been
combined into a new function SDL_CreateSurface().
SDL_CreateRGBSurfaceFrom() and SDL_CreateRGBSurfaceWithFormatFrom() have
been combined into a new function SDL_CreateSurfaceFrom(), and the
parameter order has changed for consistency with
SDL_CreateSurface().</p>
<p>You can implement the old functions in your own code easily:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>SDL_Surface <span class="op">*</span>SDL_CreateRGBSurface<span class="op">(</span>Uint32 flags<span class="op">,</span> <span class="dt">int</span> width<span class="op">,</span> <span class="dt">int</span> height<span class="op">,</span> <span class="dt">int</span> depth<span class="op">,</span> Uint32 Rmask<span class="op">,</span> Uint32 Gmask<span class="op">,</span> Uint32 Bmask<span class="op">,</span> Uint32 Amask<span class="op">)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_CreateSurface<span class="op">(</span>width<span class="op">,</span> height<span class="op">,</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>            SDL_GetPixelFormatForMasks<span class="op">(</span>depth<span class="op">,</span> Rmask<span class="op">,</span> Gmask<span class="op">,</span> Bmask<span class="op">,</span> Amask<span class="op">));</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>SDL_Surface <span class="op">*</span>SDL_CreateRGBSurfaceWithFormat<span class="op">(</span>Uint32 flags<span class="op">,</span> <span class="dt">int</span> width<span class="op">,</span> <span class="dt">int</span> height<span class="op">,</span> <span class="dt">int</span> depth<span class="op">,</span> Uint32 format<span class="op">)</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_CreateSurface<span class="op">(</span>width<span class="op">,</span> height<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>SDL_Surface <span class="op">*</span>SDL_CreateRGBSurfaceFrom<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>pixels<span class="op">,</span> <span class="dt">int</span> width<span class="op">,</span> <span class="dt">int</span> height<span class="op">,</span> <span class="dt">int</span> depth<span class="op">,</span> <span class="dt">int</span> pitch<span class="op">,</span> Uint32 Rmask<span class="op">,</span> Uint32 Gmask<span class="op">,</span> Uint32 Bmask<span class="op">,</span> Uint32 Amask<span class="op">)</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_CreateSurfaceFrom<span class="op">(</span>width<span class="op">,</span> height<span class="op">,</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>                                 SDL_GetPixelFormatForMasks<span class="op">(</span>depth<span class="op">,</span> Rmask<span class="op">,</span> Gmask<span class="op">,</span> Bmask<span class="op">,</span> Amask<span class="op">),</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                                 pixels<span class="op">,</span> pitch<span class="op">);</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>SDL_Surface <span class="op">*</span>SDL_CreateRGBSurfaceWithFormatFrom<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>pixels<span class="op">,</span> <span class="dt">int</span> width<span class="op">,</span> <span class="dt">int</span> height<span class="op">,</span> <span class="dt">int</span> depth<span class="op">,</span> <span class="dt">int</span> pitch<span class="op">,</span> Uint32 format<span class="op">)</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SDL_CreateSurfaceFrom<span class="op">(</span>width<span class="op">,</span> height<span class="op">,</span> format<span class="op">,</span> pixels<span class="op">,</span> pitch<span class="op">);</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>But if you&#39;re migrating your code which uses masks, you probably have
a format in mind, possibly one of these:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Various mask (R, G, B, A) and their corresponding format:</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bn">0xFF000000</span> <span class="bn">0x00FF0000</span> <span class="bn">0x0000FF00</span> <span class="bn">0x000000FF</span> <span class="op">=&gt;</span> SDL_PIXELFORMAT_RGBA8888</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="bn">0x00FF0000</span> <span class="bn">0x0000FF00</span> <span class="bn">0x000000FF</span> <span class="bn">0xFF000000</span> <span class="op">=&gt;</span> SDL_PIXELFORMAT_ARGB8888</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0x0000FF00</span> <span class="bn">0x00FF0000</span> <span class="bn">0xFF000000</span> <span class="bn">0x000000FF</span> <span class="op">=&gt;</span> SDL_PIXELFORMAT_BGRA8888</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="bn">0x000000FF</span> <span class="bn">0x0000FF00</span> <span class="bn">0x00FF0000</span> <span class="bn">0xFF000000</span> <span class="op">=&gt;</span> SDL_PIXELFORMAT_ABGR8888</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="bn">0x0000F800</span> <span class="bn">0x000007E0</span> <span class="bn">0x0000001F</span> <span class="bn">0x00000000</span> <span class="op">=&gt;</span> SDL_PIXELFORMAT_RGB565</span></code></pre></div>
<p>SDL_BlitSurface() and SDL_BlitSurfaceScaled() now have a const
<code>dstrect</code> parameter and do not fill it in with the final
destination rectangle.</p>
<p>SDL_BlitSurfaceScaled() and SDL_BlitSurfaceUncheckedScaled() now take
a scale parameter.</p>
<p>SDL_PixelFormat is used instead of Uint32 for API functions that
refer to pixel format by enumerated value.</p>
<p>SDL_SetSurfaceColorKey() takes an bool to enable and disable
colorkey. RLE acceleration isn&#39;t controlled by the parameter, you should
use SDL_SetSurfaceRLE() to change that separately.</p>
<p>SDL_SetSurfaceRLE() takes an bool to enable and disable RLE
acceleration.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_BlitScaled() =&gt; SDL_BlitSurfaceScaled(), returns bool</li>
<li>SDL_ConvertSurfaceFormat() =&gt; SDL_ConvertSurface()</li>
<li>SDL_FillRect() =&gt; SDL_FillSurfaceRect(), returns bool</li>
<li>SDL_FillRects() =&gt; SDL_FillSurfaceRects(), returns bool</li>
<li>SDL_FreeSurface() =&gt; SDL_DestroySurface()</li>
<li>SDL_GetClipRect() =&gt; SDL_GetSurfaceClipRect(), returns bool</li>
<li>SDL_GetColorKey() =&gt; SDL_GetSurfaceColorKey(), returns bool</li>
<li>SDL_HasColorKey() =&gt; SDL_SurfaceHasColorKey()</li>
<li>SDL_HasSurfaceRLE() =&gt; SDL_SurfaceHasRLE()</li>
<li>SDL_LoadBMP_RW() =&gt; SDL_LoadBMP_IO()</li>
<li>SDL_LowerBlit() =&gt; SDL_BlitSurfaceUnchecked(), returns bool</li>
<li>SDL_LowerBlitScaled() =&gt; SDL_BlitSurfaceUncheckedScaled(),
returns bool</li>
<li>SDL_SaveBMP_RW() =&gt; SDL_SaveBMP_IO(), returns bool</li>
<li>SDL_SetClipRect() =&gt; SDL_SetSurfaceClipRect()</li>
<li>SDL_SetColorKey() =&gt; SDL_SetSurfaceColorKey(), returns bool</li>
<li>SDL_UpperBlit() =&gt; SDL_BlitSurface(), returns bool</li>
<li>SDL_UpperBlitScaled() =&gt; SDL_BlitSurfaceScaled(), returns
bool</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_SWSURFACE</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_FreeFormat()</li>
<li>SDL_GetYUVConversionMode()</li>
<li>SDL_GetYUVConversionModeForResolution()</li>
<li>SDL_SetYUVConversionMode() - use SDL_SetSurfaceColorspace() to set
the surface colorspace and SDL_PROP_TEXTURE_CREATE_COLORSPACE_NUMBER
with SDL_CreateTextureWithProperties() to set the texture colorspace.
The default colorspace for YUV pixel formats is
SDL_COLORSPACE_JPEG.</li>
<li>SDL_SoftStretch() - use SDL_StretchSurface() with
SDL_SCALEMODE_NEAREST</li>
<li>SDL_SoftStretchLinear() - use SDL_StretchSurface() with
SDL_SCALEMODE_LINEAR</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_PREALLOC =&gt; SDL_SURFACE_PREALLOCATED</li>
<li>SDL_SIMD_ALIGNED =&gt; SDL_SURFACE_SIMD_ALIGNED</li>
</ul>
<h2 id="sdl_systemh">SDL_system.h</h2>
<p>SDL_WindowsMessageHook has changed signatures so the message may be
modified and it can block further message processing.</p>
<p>SDL_RequestAndroidPermission is no longer a blocking call; the caller
now provides a callback function that fires when a response is
available.</p>
<p>SDL_iPhoneSetAnimationCallback() and SDL_iPhoneSetEventPump() have
been renamed to SDL_SetiOSAnimationCallback() and SDL_SetiOSEventPump(),
respectively. SDL2 has had macros to provide this new name with the old
symbol since the introduction of the iPad, but now the correctly-named
symbol is the only option.</p>
<p>SDL_IsAndroidTV() has been renamed SDL_IsTV() and is no longer
Android-specific; an app running on an Apple TV device will also return
true, for example.</p>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GetWinRTFSPathUNICODE() - WinRT support was removed in
SDL3.</li>
<li>SDL_GetWinRTFSPathUTF8() - WinRT support was removed in SDL3.</li>
<li>SDL_RenderGetD3D11Device() - replaced with the
&quot;SDL.renderer.d3d11.device&quot; property</li>
<li>SDL_RenderGetD3D12Device() - replaced with the
&quot;SDL.renderer.d3d12.device&quot; property</li>
<li>SDL_RenderGetD3D9Device() - replaced with the
&quot;SDL.renderer.d3d9.device&quot; property</li>
<li>SDL_WinRTGetDeviceFamily() - WinRT support was removed in SDL3.</li>
</ul>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_AndroidBackButton() =&gt; SDL_SendAndroidBackButton()</li>
<li>SDL_AndroidGetActivity() =&gt; SDL_GetAndroidActivity()</li>
<li>SDL_AndroidGetExternalStoragePath() =&gt;
SDL_GetAndroidExternalStoragePath()</li>
<li>SDL_AndroidGetExternalStorageState() =&gt;
SDL_GetAndroidExternalStorageState()</li>
<li>SDL_AndroidGetInternalStoragePath() =&gt;
SDL_GetAndroidInternalStoragePath()</li>
<li>SDL_AndroidGetJNIEnv() =&gt; SDL_GetAndroidJNIEnv()</li>
<li>SDL_AndroidRequestPermission() =&gt; SDL_RequestAndroidPermission(),
returns bool</li>
<li>SDL_AndroidRequestPermissionCallback() =&gt;
SDL_RequestAndroidPermissionCallback()</li>
<li>SDL_AndroidSendMessage() =&gt; SDL_SendAndroidMessage(), returns
bool</li>
<li>SDL_AndroidShowToast() =&gt; SDL_ShowAndroidToast(), returns
bool</li>
<li>SDL_DXGIGetOutputInfo() =&gt; SDL_GetDXGIOutputInfo(), returns
bool</li>
<li>SDL_Direct3D9GetAdapterIndex() =&gt;
SDL_GetDirect3D9AdapterIndex()</li>
<li>SDL_GDKGetDefaultUser() =&gt; SDL_GetGDKDefaultUser(), returns
bool</li>
<li>SDL_GDKGetTaskQueue() =&gt; SDL_GetGDKTaskQueue(), returns bool</li>
<li>SDL_IsAndroidTV() =&gt; SDL_IsTV()</li>
<li>SDL_LinuxSetThreadPriority() =&gt; SDL_SetLinuxThreadPriority(),
returns bool</li>
<li>SDL_LinuxSetThreadPriorityAndPolicy() =&gt;
SDL_SetLinuxThreadPriorityAndPolicy(), returns bool</li>
<li>SDL_OnApplicationDidBecomeActive() =&gt;
SDL_OnApplicationDidEnterForeground()</li>
<li>SDL_OnApplicationWillResignActive() =&gt;
SDL_OnApplicationWillEnterBackground()</li>
<li>SDL_iOSSetAnimationCallback() =&gt; SDL_SetiOSAnimationCallback(),
returns bool</li>
<li>SDL_iOSSetEventPump() =&gt; SDL_SetiOSEventPump()</li>
<li>SDL_iPhoneSetAnimationCallback() =&gt;
SDL_SetiOSAnimationCallback(), returns bool</li>
<li>SDL_iPhoneSetEventPump() =&gt; SDL_SetiOSEventPump()</li>
</ul>
<h2 id="sdl_syswmh">SDL_syswm.h</h2>
<p>This header has been removed.</p>
<p>The Windows and X11 events are now available via callbacks which you
can set with SDL_SetWindowsMessageHook() and SDL_SetX11EventHook().</p>
<p>The information previously available in SDL_GetWindowWMInfo() is now
available as window properties, e.g.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>    SDL_SysWMinfo info<span class="op">;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    SDL_VERSION<span class="op">(&amp;</span>info<span class="op">.</span>version<span class="op">);</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#if defined(__WIN32__)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    HWND hwnd <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_GetWindowWMInfo<span class="op">(</span>window<span class="op">,</span> <span class="op">&amp;</span>info<span class="op">)</span> <span class="op">&amp;&amp;</span> info<span class="op">.</span>subsystem <span class="op">==</span> SDL_SYSWM_WINDOWS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>        hwnd <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>win<span class="op">.</span>window<span class="op">;</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>hwnd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__MACOSX__)</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    NSWindow <span class="op">*</span>nswindow <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_GetWindowWMInfo<span class="op">(</span>window<span class="op">,</span> <span class="op">&amp;</span>info<span class="op">)</span> <span class="op">&amp;&amp;</span> info<span class="op">.</span>subsystem <span class="op">==</span> SDL_SYSWM_COCOA<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>        nswindow <span class="op">=</span> <span class="op">(</span>__bridge NSWindow <span class="op">*)</span>info<span class="op">.</span>info<span class="op">.</span>cocoa<span class="op">.</span>window<span class="op">;</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>nswindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__LINUX__)</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_GetWindowWMInfo<span class="op">(</span>window<span class="op">,</span> <span class="op">&amp;</span>info<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>info<span class="op">.</span>subsystem <span class="op">==</span> SDL_SYSWM_X11<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>            Display <span class="op">*</span>xdisplay <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>x11<span class="op">.</span>display<span class="op">;</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>            Window xwindow <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>x11<span class="op">.</span>window<span class="op">;</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>xdisplay <span class="op">&amp;&amp;</span> xwindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>                <span class="op">...</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>info<span class="op">.</span>subsystem <span class="op">==</span> SDL_SYSWM_WAYLAND<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>            <span class="kw">struct</span> wl_display <span class="op">*</span>display <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>wl<span class="op">.</span>display<span class="op">;</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>            <span class="kw">struct</span> wl_surface <span class="op">*</span>surface <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>wl<span class="op">.</span>surface<span class="op">;</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>display <span class="op">&amp;&amp;</span> surface<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>                <span class="op">...</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__IPHONEOS__)</span></span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>    UIWindow <span class="op">*</span>uiwindow <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_GetWindowWMInfo<span class="op">(</span>window<span class="op">,</span> <span class="op">&amp;</span>info<span class="op">)</span> <span class="op">&amp;&amp;</span> info<span class="op">.</span>subsystem <span class="op">==</span> SDL_SYSWM_UIKIT<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>        uiwindow <span class="op">=</span> <span class="op">(</span>__bridge UIWindow <span class="op">*)</span>info<span class="op">.</span>info<span class="op">.</span>uikit<span class="op">.</span>window<span class="op">;</span></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>uiwindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>        GLuint framebuffer <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>uikit<span class="op">.</span>framebuffer<span class="op">;</span></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>        GLuint colorbuffer <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>uikit<span class="op">.</span>colorbuffer<span class="op">;</span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>        GLuint resolveFramebuffer <span class="op">=</span> info<span class="op">.</span>info<span class="op">.</span>uikit<span class="op">.</span>resolveFramebuffer<span class="op">;</span></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span></code></pre></div>
<p>becomes:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#if defined(SDL_PLATFORM_WIN32)</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    HWND hwnd <span class="op">=</span> <span class="op">(</span>HWND<span class="op">)</span>SDL_GetPointerProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_WIN32_HWND_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>hwnd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(SDL_PLATFORM_MACOS)</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    NSWindow <span class="op">*</span>nswindow <span class="op">=</span> <span class="op">(</span>__bridge NSWindow <span class="op">*)</span>SDL_GetPointerProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_COCOA_WINDOW_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>nswindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(SDL_PLATFORM_LINUX)</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_strcmp<span class="op">(</span>SDL_GetCurrentVideoDriver<span class="op">(),</span> <span class="st">&quot;x11&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>        Display <span class="op">*</span>xdisplay <span class="op">=</span> <span class="op">(</span>Display <span class="op">*)</span>SDL_GetPointerProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_X11_DISPLAY_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>        Window xwindow <span class="op">=</span> <span class="op">(</span>Window<span class="op">)</span>SDL_GetNumberProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_X11_WINDOW_NUMBER<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>xdisplay <span class="op">&amp;&amp;</span> xwindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>SDL_strcmp<span class="op">(</span>SDL_GetCurrentVideoDriver<span class="op">(),</span> <span class="st">&quot;wayland&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">struct</span> wl_display <span class="op">*</span>display <span class="op">=</span> <span class="op">(</span><span class="kw">struct</span> wl_display <span class="op">*)</span>SDL_GetPointerProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_WAYLAND_DISPLAY_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">struct</span> wl_surface <span class="op">*</span>surface <span class="op">=</span> <span class="op">(</span><span class="kw">struct</span> wl_surface <span class="op">*)</span>SDL_GetPointerProperty<span class="op">(</span>SDL_GetWindowProperties<span class="op">(</span>window<span class="op">),</span> SDL_PROP_WINDOW_WAYLAND_SURFACE_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>display <span class="op">&amp;&amp;</span> surface<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(SDL_PLATFORM_IOS)</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    SDL_PropertiesID props <span class="op">=</span> SDL_GetWindowProperties<span class="op">(</span>window<span class="op">);</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    UIWindow <span class="op">*</span>uiwindow <span class="op">=</span> <span class="op">(</span>__bridge UIWindow <span class="op">*)</span>SDL_GetPointerProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_UIKIT_WINDOW_POINTER<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>uiwindow<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>        GLuint framebuffer <span class="op">=</span> <span class="op">(</span>GLuint<span class="op">)</span>SDL_GetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_UIKIT_OPENGL_FRAMEBUFFER_NUMBER<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>        GLuint colorbuffer <span class="op">=</span> <span class="op">(</span>GLuint<span class="op">)</span>SDL_GetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_UIKIT_OPENGL_RENDERBUFFER_NUMBER<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>        GLuint resolveFramebuffer <span class="op">=</span> <span class="op">(</span>GLuint<span class="op">)</span>SDL_GetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_UIKIT_OPENGL_RESOLVE_FRAMEBUFFER_NUMBER<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span></code></pre></div>
<h2 id="sdl_threadh">SDL_thread.h</h2>
<p>SDL_CreateThreadWithStackSize has been replaced with
SDL_CreateThreadWithProperties.</p>
<p>SDL_CreateThread and SDL_CreateThreadWithProperties now take
beginthread/endthread function pointers on all platforms (ignoring them
on most), and have been replaced with macros that hide this detail on
all platforms. This works the same as before at the source code level,
but the actual function signature that is called in SDL has changed. The
library&#39;s exported symbol is SDL_CreateThreadRuntime, and looking for
&quot;SDL_CreateThread&quot; in the DLL/Shared Library/Dylib will fail. You should
not call this directly, but instead always use the macro!</p>
<p>SDL_GetTLS() and SDL_SetTLS() take a pointer to a TLS ID, and will
automatically initialize it in a thread-safe way as needed.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_SetThreadPriority() =&gt; SDL_SetCurrentThreadPriority()</li>
<li>SDL_TLSCleanup() =&gt; SDL_CleanupTLS()</li>
<li>SDL_TLSGet() =&gt; SDL_GetTLS()</li>
<li>SDL_TLSSet() =&gt; SDL_SetTLS(), returns bool</li>
<li>SDL_ThreadID() =&gt; SDL_GetCurrentThreadID()</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_TLSCreate() - TLS IDs are automatically allocated as
needed.</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_threadID =&gt; SDL_ThreadID</li>
</ul>
<h2 id="sdl_timerh">SDL_timer.h</h2>
<p>SDL_GetTicks() now returns a 64-bit value. Instead of using the
SDL_TICKS_PASSED macro, you can directly compare tick values, e.g.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>Uint32 deadline <span class="op">=</span> SDL_GetTicks<span class="op">()</span> <span class="op">+</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>SDL_TICKS_PASSED<span class="op">(</span>SDL_GetTicks<span class="op">(),</span> deadline<span class="op">))</span> <span class="op">{</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>becomes:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>Uint64 deadline <span class="op">=</span> SDL_GetTicks<span class="op">()</span> <span class="op">+</span> <span class="dv">1000</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>SDL_GetTicks<span class="op">()</span> <span class="op">&gt;=</span> deadline<span class="op">)</span> <span class="op">{</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>If you were using this macro for other things besides SDL ticks
values, you can define it in your own code as:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SDL_TICKS_PASSED</span><span class="op">(</span><span class="pp">A</span><span class="op">,</span><span class="pp"> B</span><span class="op">)</span><span class="pp">  </span><span class="op">((</span><span class="pp">Sint32</span><span class="op">)((</span><span class="pp">B</span><span class="op">)</span><span class="pp"> </span><span class="op">-</span><span class="pp"> </span><span class="op">(</span><span class="pp">A</span><span class="op">))</span><span class="pp"> </span><span class="op">&lt;=</span><span class="pp"> </span><span class="dv">0</span><span class="op">)</span></span></code></pre></div>
<p>The callback passed to SDL_AddTimer() has changed parameters to:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>Uint32 SDLCALL TimerCallback<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>userdata<span class="op">,</span> SDL_TimerID timerID<span class="op">,</span> Uint32 interval<span class="op">);</span></span></code></pre></div>
<h2 id="sdl_touchh">SDL_touch.h</h2>
<p>SDL_GetTouchName is replaced with SDL_GetTouchDeviceName(), which
takes an SDL_TouchID instead of an index.</p>
<p>SDL_TouchID and SDL_FingerID are now Uint64 with 0 being an invalid
value.</p>
<p>Rather than iterating over touch devices using an index, there is a
new function SDL_GetTouchDevices() to get the available devices.</p>
<p>Rather than iterating over touch fingers using an index, there is a
new function SDL_GetTouchFingers() to get the current set of active
fingers.</p>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GetNumTouchDevices() - replaced with SDL_GetTouchDevices()</li>
<li>SDL_GetNumTouchFingers() - replaced with SDL_GetTouchFingers()</li>
<li>SDL_GetTouchDevice() - replaced with SDL_GetTouchDevices()</li>
<li>SDL_GetTouchFinger() - replaced with SDL_GetTouchFingers()</li>
</ul>
<h2 id="sdl_versionh">SDL_version.h</h2>
<p>SDL_GetRevisionNumber() has been removed from the API, it always
returned 0 in SDL 2.0.</p>
<p>SDL_GetVersion() returns the version number, which can be directly
compared with another version wrapped with SDL_VERSIONNUM().</p>
<p>The following structures have been removed:</p>
<ul>
<li>SDL_version</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_COMPILEDVERSION =&gt; SDL_VERSION</li>
<li>SDL_PATCHLEVEL =&gt; SDL_MICRO_VERSION</li>
</ul>
<h2 id="sdl_videoh">SDL_video.h</h2>
<p>Several video backends have had their names lower-cased (&quot;kmsdrm&quot;,
&quot;rpi&quot;, &quot;android&quot;, &quot;psp&quot;, &quot;ps2&quot;, &quot;vita&quot;). SDL already does a
case-insensitive compare for SDL_HINT_VIDEO_DRIVER tests, but if your
app is calling SDL_GetVideoDriver() or SDL_GetCurrentVideoDriver() and
doing case-sensitive compares on those strings, please update your
code.</p>
<p>SDL_VideoInit() and SDL_VideoQuit() have been removed. Instead you
can call SDL_InitSubSystem() and SDL_QuitSubSystem() with
SDL_INIT_VIDEO, which will properly refcount the subsystems. You can
choose a specific video driver using SDL_HINT_VIDEO_DRIVER.</p>
<p>Rather than iterating over displays using display index, there is a
new function SDL_GetDisplays() to get the current list of displays, and
functions which used to take a display index now take SDL_DisplayID,
with an invalid ID being 0.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>SDL_InitSubSystem<span class="op">(</span>SDL_INIT_VIDEO<span class="op">))</span> <span class="op">{</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">,</span> num_displays <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>        SDL_DisplayID <span class="op">*</span>displays <span class="op">=</span> SDL_GetDisplays<span class="op">(&amp;</span>num_displays<span class="op">);</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>displays<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_displays<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>                SDL_DisplayID instance_id <span class="op">=</span> displays<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>                <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>name <span class="op">=</span> SDL_GetDisplayName<span class="op">(</span>instance_id<span class="op">);</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>                SDL_Log<span class="op">(</span><span class="st">&quot;Display %&quot;</span> SDL_PRIu32 <span class="st">&quot;: </span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span> instance_id<span class="op">,</span> name <span class="op">?</span> name <span class="op">:</span> <span class="st">&quot;Unknown&quot;</span><span class="op">);</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>            SDL_free<span class="op">(</span>displays<span class="op">);</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>        SDL_QuitSubSystem<span class="op">(</span>SDL_INIT_VIDEO<span class="op">);</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_CreateWindow() has been simplified and no longer takes a window
position. You can use SDL_CreateWindowWithProperties() if you need to
set the window position when creating it, e.g.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>    SDL_PropertiesID props <span class="op">=</span> SDL_CreateProperties<span class="op">();</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    SDL_SetStringProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_TITLE_STRING<span class="op">,</span> title<span class="op">);</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    SDL_SetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_X_NUMBER<span class="op">,</span> x<span class="op">);</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    SDL_SetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_Y_NUMBER<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    SDL_SetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_WIDTH_NUMBER<span class="op">,</span> width<span class="op">);</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    SDL_SetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_HEIGHT_NUMBER<span class="op">,</span> height<span class="op">);</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// For window flags you should use separate window creation properties,</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// but for easier migration from SDL2 you can use the following:</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    SDL_SetNumberProperty<span class="op">(</span>props<span class="op">,</span> SDL_PROP_WINDOW_CREATE_FLAGS_NUMBER<span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    pWindow <span class="op">=</span> SDL_CreateWindowWithProperties<span class="op">(</span>props<span class="op">);</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    SDL_DestroyProperties<span class="op">(</span>props<span class="op">);</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>window<span class="op">)</span> <span class="op">{</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The SDL_WINDOWPOS_UNDEFINED_DISPLAY() and
SDL_WINDOWPOS_CENTERED_DISPLAY() macros take a display ID instead of
display index. The display ID 0 has a special meaning in this case, and
is used to indicate the primary display.</p>
<p>The SDL_WINDOW_SHOWN flag has been removed. Windows are shown by
default and can be created hidden by using the SDL_WINDOW_HIDDEN
flag.</p>
<p>The SDL_WINDOW_SKIP_TASKBAR flag has been replaced by the
SDL_WINDOW_UTILITY flag, which has the same functionality.</p>
<p>SDL_DisplayMode now includes the pixel density which can be greater
than 1.0 for display modes that have a higher pixel size than the mode
size. You should use SDL_GetWindowSizeInPixels() to get the actual pixel
size of the window back buffer.</p>
<p>The refresh rate in SDL_DisplayMode is now a float, as well as being
represented as a precise fraction with numerator and denominator.</p>
<p>Rather than iterating over display modes using an index, there is a
new function SDL_GetFullscreenDisplayModes() to get the list of
available fullscreen modes on a display.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    SDL_DisplayID display <span class="op">=</span> SDL_GetPrimaryDisplay<span class="op">();</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_modes <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    SDL_DisplayMode <span class="op">**</span>modes <span class="op">=</span> SDL_GetFullscreenDisplayModes<span class="op">(</span>display<span class="op">,</span> <span class="op">&amp;</span>num_modes<span class="op">);</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>modes<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_modes<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>            SDL_DisplayMode <span class="op">*</span>mode <span class="op">=</span> modes<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>            SDL_Log<span class="op">(</span><span class="st">&quot;Display %&quot;</span> SDL_PRIu32 <span class="st">&quot; mode </span><span class="sc">%d</span><span class="st">: </span><span class="sc">%d</span><span class="st">x</span><span class="sc">%d</span><span class="st">@</span><span class="sc">%g</span><span class="st">x </span><span class="sc">%g</span><span class="st">Hz&quot;</span><span class="op">,</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>                    display<span class="op">,</span> i<span class="op">,</span> mode<span class="op">-&gt;</span>w<span class="op">,</span> mode<span class="op">-&gt;</span>h<span class="op">,</span> mode<span class="op">-&gt;</span>pixel_density<span class="op">,</span> mode<span class="op">-&gt;</span>refresh_rate<span class="op">);</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>        SDL_free<span class="op">(</span>modes<span class="op">);</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>SDL_GetDesktopDisplayMode() and SDL_GetCurrentDisplayMode() return
pointers to display modes rather than filling in application memory.</p>
<p>Windows now have an explicit fullscreen mode that is set, using
SDL_SetWindowFullscreenMode(). The fullscreen mode for a window can be
queried with SDL_GetWindowFullscreenMode(), which returns a pointer to
the mode, or NULL if the window will be fullscreen desktop.
SDL_SetWindowFullscreen() just takes a boolean value, setting the
correct fullscreen state based on the selected mode.</p>
<p>SDL_WINDOW_FULLSCREEN_DESKTOP has been removed, and you can call
SDL_GetWindowFullscreenMode() to see whether an exclusive fullscreen
mode will be used or the borderless fullscreen desktop mode will be used
when the window is fullscreen.</p>
<p>SDL_SetWindowBrightness(), SDL_GetWindowBrightness,
SDL_SetWindowGammaRamp(), and SDL_GetWindowGammaRamp have been removed
from the API, because they interact poorly with modern operating systems
and aren&#39;t able to limit their effects to the SDL window.</p>
<p>Programs which have access to shaders can implement more robust
versions of those functions using custom shader code rendered as a
post-process effect.</p>
<p>Removed SDL_GL_CONTEXT_EGL from OpenGL configuration attributes. You
can instead use
<code>SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_ES);</code></p>
<p>SDL_GL_GetProcAddress() and SDL_EGL_GetProcAddress() now return
<code>SDL_FunctionPointer</code> instead of <code>void *</code>, and
should be cast to the appropriate function type. You can define
SDL_FUNCTION_POINTER_IS_VOID_POINTER in your project to restore the
previous behavior.</p>
<p>SDL_GL_DeleteContext() has been renamed to SDL_GL_DestroyContext to
match SDL naming conventions (and glX/EGL!).</p>
<p>SDL_GL_GetSwapInterval() takes the interval as an output parameter
and returns true if the function succeeds or false if there was an
error.</p>
<p>SDL_GL_GetDrawableSize() has been removed.
SDL_GetWindowSizeInPixels() can be used in its place.</p>
<p>The SDL_WINDOW_TOOLTIP and SDL_WINDOW_POPUP_MENU window flags are now
supported on Windows, Mac (Cocoa), X11, and Wayland. Creating windows
with these flags must happen via the
<code>SDL_CreatePopupWindow()</code> function. This function requires
passing in the handle to a valid parent window for the popup, and the
popup window is positioned relative to the parent.</p>
<p>SDL_WindowFlags is used instead of Uint32 for API functions that
refer to window flags, and has been extended to 64 bits.</p>
<p>SDL_GetWindowOpacity() directly returns the opacity instead of using
an out parameter.</p>
<p>The following functions have been renamed:</p>
<ul>
<li>SDL_GL_DeleteContext() =&gt; SDL_GL_DestroyContext(), returns
bool</li>
<li>SDL_GetClosestDisplayMode() =&gt;
SDL_GetClosestFullscreenDisplayMode(), returns bool</li>
<li>SDL_GetDisplayOrientation() =&gt;
SDL_GetCurrentDisplayOrientation()</li>
<li>SDL_GetPointDisplayIndex() =&gt; SDL_GetDisplayForPoint()</li>
<li>SDL_GetRectDisplayIndex() =&gt; SDL_GetDisplayForRect()</li>
<li>SDL_GetWindowDisplayIndex() =&gt; SDL_GetDisplayForWindow()</li>
<li>SDL_GetWindowDisplayMode() =&gt; SDL_GetWindowFullscreenMode()</li>
<li>SDL_HasWindowSurface() =&gt; SDL_WindowHasSurface()</li>
<li>SDL_IsScreenSaverEnabled() =&gt; SDL_ScreenSaverEnabled()</li>
<li>SDL_SetWindowDisplayMode() =&gt; SDL_SetWindowFullscreenMode(),
returns bool</li>
</ul>
<p>The following functions have been removed:</p>
<ul>
<li>SDL_GetDisplayDPI() - not reliable across platforms, approximately
replaced by multiplying SDL_GetWindowDisplayScale() times 160 on iPhone
and Android, and 96 on other platforms.</li>
<li>SDL_GetDisplayMode()</li>
<li>SDL_GetNumDisplayModes() - replaced with
SDL_GetFullscreenDisplayModes()</li>
<li>SDL_GetNumVideoDisplays() - replaced with SDL_GetDisplays()</li>
<li>SDL_SetWindowGrab() - use SDL_SetWindowMouseGrab() instead, along
with SDL_SetWindowKeyboardGrab() if you also set
SDL_HINT_GRAB_KEYBOARD.</li>
<li>SDL_GetWindowGrab() - use SDL_GetWindowMouseGrab() instead, along
with SDL_GetWindowKeyboardGrab() if you also set
SDL_HINT_GRAB_KEYBOARD.</li>
<li>SDL_GetWindowData() - use SDL_GetPointerProperty() instead, along
with SDL_GetWindowProperties()</li>
<li>SDL_SetWindowData() - use SDL_SetPointerProperty() instead, along
with SDL_GetWindowProperties()</li>
<li>SDL_CreateWindowFrom() - use SDL_CreateWindowWithProperties() with
the properties that allow you to wrap an existing window</li>
<li>SDL_SetWindowInputFocus() - use SDL_RaiseWindow() instead</li>
<li>SDL_SetWindowModalFor() - use SDL_SetWindowParent() with
SDL_SetWindowModal() instead</li>
<li>SDL_SetWindowBrightness() - use a shader or other in-game
effect.</li>
<li>SDL_GetWindowBrightness() - use a shader or other in-game
effect.</li>
<li>SDL_SetWindowGammaRamp() - use a shader or other in-game
effect.</li>
<li>SDL_GetWindowGammaRamp() - use a shader or other in-game
effect.</li>
</ul>
<p>The SDL_Window id type is named SDL_WindowID</p>
<p>The following environment variables have been removed:</p>
<ul>
<li>SDL_VIDEO_GL_DRIVER - replaced with the hint
SDL_HINT_OPENGL_LIBRARY</li>
<li>SDL_VIDEO_EGL_DRIVER - replaced with the hint
SDL_HINT_EGL_LIBRARY</li>
</ul>
<p>The following symbols have been renamed:</p>
<ul>
<li>SDL_DISPLAYEVENT_DISCONNECTED =&gt; SDL_EVENT_DISPLAY_REMOVED</li>
<li>SDL_DISPLAYEVENT_MOVED =&gt; SDL_EVENT_DISPLAY_MOVED</li>
<li>SDL_DISPLAYEVENT_ORIENTATION =&gt;
SDL_EVENT_DISPLAY_ORIENTATION</li>
<li>SDL_GLattr =&gt; SDL_GLAttr</li>
<li>SDL_GLcontextFlag =&gt; SDL_GLContextFlag</li>
<li>SDL_GLcontextReleaseFlag =&gt; SDL_GLContextReleaseFlag</li>
<li>SDL_GLprofile =&gt; SDL_GLProfile</li>
<li>SDL_WINDOWEVENT_CLOSE =&gt; SDL_EVENT_WINDOW_CLOSE_REQUESTED</li>
<li>SDL_WINDOWEVENT_DISPLAY_CHANGED =&gt;
SDL_EVENT_WINDOW_DISPLAY_CHANGED</li>
<li>SDL_WINDOWEVENT_ENTER =&gt; SDL_EVENT_WINDOW_MOUSE_ENTER</li>
<li>SDL_WINDOWEVENT_EXPOSED =&gt; SDL_EVENT_WINDOW_EXPOSED</li>
<li>SDL_WINDOWEVENT_FOCUS_GAINED =&gt;
SDL_EVENT_WINDOW_FOCUS_GAINED</li>
<li>SDL_WINDOWEVENT_FOCUS_LOST =&gt; SDL_EVENT_WINDOW_FOCUS_LOST</li>
<li>SDL_WINDOWEVENT_HIDDEN =&gt; SDL_EVENT_WINDOW_HIDDEN</li>
<li>SDL_WINDOWEVENT_HIT_TEST =&gt; SDL_EVENT_WINDOW_HIT_TEST</li>
<li>SDL_WINDOWEVENT_ICCPROF_CHANGED =&gt;
SDL_EVENT_WINDOW_ICCPROF_CHANGED</li>
<li>SDL_WINDOWEVENT_LEAVE =&gt; SDL_EVENT_WINDOW_MOUSE_LEAVE</li>
<li>SDL_WINDOWEVENT_MAXIMIZED =&gt; SDL_EVENT_WINDOW_MAXIMIZED</li>
<li>SDL_WINDOWEVENT_MINIMIZED =&gt; SDL_EVENT_WINDOW_MINIMIZED</li>
<li>SDL_WINDOWEVENT_MOVED =&gt; SDL_EVENT_WINDOW_MOVED</li>
<li>SDL_WINDOWEVENT_RESIZED =&gt; SDL_EVENT_WINDOW_RESIZED</li>
<li>SDL_WINDOWEVENT_RESTORED =&gt; SDL_EVENT_WINDOW_RESTORED</li>
<li>SDL_WINDOWEVENT_SHOWN =&gt; SDL_EVENT_WINDOW_SHOWN</li>
<li>SDL_WINDOW_ALLOW_HIGHDPI =&gt; SDL_WINDOW_HIGH_PIXEL_DENSITY</li>
<li>SDL_WINDOW_INPUT_GRABBED =&gt; SDL_WINDOW_MOUSE_GRABBED</li>
</ul>
<p>The following symbols have been removed:</p>
<ul>
<li>SDL_WINDOWEVENT_SIZE_CHANGED - handle the SDL_EVENT_WINDOW_RESIZED
and SDL_EVENT_WINDOW_PIXEL_SIZE_CHANGED events instead</li>
<li>SDL_WINDOWEVENT_TAKE_FOCUS</li>
</ul>
<p>The following window operations are now considered to be asynchronous
requests and should not be assumed to succeed unless a corresponding
event has been received:</p>
<ul>
<li>SDL_SetWindowSize() (SDL_EVENT_WINDOW_RESIZED)</li>
<li>SDL_SetWindowPosition() (SDL_EVENT_WINDOW_MOVED)</li>
<li>SDL_MinimizeWindow() (SDL_EVENT_WINDOW_MINIMIZED)</li>
<li>SDL_MaximizeWindow() (SDL_EVENT_WINDOW_MAXIMIZED)</li>
<li>SDL_RestoreWindow() (SDL_EVENT_WINDOW_RESTORED)</li>
<li>SDL_SetWindowFullscreen() (SDL_EVENT_WINDOW_ENTER_FULLSCREEN /
SDL_EVENT_WINDOW_LEAVE_FULLSCREEN)</li>
</ul>
<p>If it is required that operations be applied immediately after one of
the preceding calls, the <code>SDL_SyncWindow()</code> function will
attempt to wait until all pending window operations have completed. The
<code>SDL_HINT_VIDEO_SYNC_WINDOW_OPERATIONS</code> hint can also be set
to automatically synchronize after all calls to an asynchronous window
operation, mimicking the behavior of SDL 2. Be aware that synchronizing
can potentially block for long periods of time, as it may have to wait
for window animations to complete. Also note that windowing systems can
deny or not precisely obey these requests (e.g. windows may not be
allowed to be larger than the usable desktop space or placed offscreen),
so a corresponding event may never arrive or not contain the expected
values.</p>
<h2 id="sdl_vulkanh">SDL_vulkan.h</h2>
<p>SDL_Vulkan_GetInstanceExtensions() no longer takes a window
parameter, and no longer makes the app allocate query/allocate space for
the result, instead returning a static const internal string.</p>
<p>SDL_Vulkan_GetVkGetInstanceProcAddr() now returns
<code>SDL_FunctionPointer</code> instead of <code>void *</code>, and
should be cast to PFN_vkGetInstanceProcAddr.</p>
<p>SDL_Vulkan_CreateSurface() now takes a VkAllocationCallbacks pointer
as its third parameter. If you don&#39;t have an allocator to supply, pass a
NULL here to use the system default allocator (SDL2 always used the
system default allocator here).</p>
<p>SDL_Vulkan_GetDrawableSize() has been removed.
SDL_GetWindowSizeInPixels() can be used in its place.</p>
<p>SDL_vulkanInstance and SDL_vulkanSurface have been removed. They were
for compatibility with Tizen, who had built their own Vulkan interface
into SDL2, but these apps will need changes for the SDL3 API if they are
upgraded anyhow.</p>
</body>
</html>
